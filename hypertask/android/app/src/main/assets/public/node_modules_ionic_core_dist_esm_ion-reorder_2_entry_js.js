"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js"],{

/***/ 75057:
/*!*************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/index-c4b11676.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": () => (/* binding */ printRequiredElementError),
/* harmony export */   "b": () => (/* binding */ printIonError),
/* harmony export */   "p": () => (/* binding */ printIonWarning)
/* harmony export */ });
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
/**
 * Logs a warning to the console with an Ionic prefix
 * to indicate the library that is warning the developer.
 *
 * @param message - The string message to be logged to the console.
 */
const printIonWarning = (message, ...params) => {
  return console.warn(`[Ionic Warning]: ${message}`, ...params);
};
/*
 * Logs an error to the console with an Ionic prefix
 * to indicate the library that is warning the developer.
 *
 * @param message - The string message to be logged to the console.
 * @param params - Additional arguments to supply to the console.error.
 */
const printIonError = (message, ...params) => {
  return console.error(`[Ionic Error]: ${message}`, ...params);
};
/**
 * Prints an error informing developers that an implementation requires an element to be used
 * within a specific selector.
 *
 * @param el The web component element this is requiring the element.
 * @param targetSelectors The selector or selectors that were not found.
 */
const printRequiredElementError = (el, ...targetSelectors) => {
  return console.error(`<${el.tagName.toLowerCase()}> must be used inside ${targetSelectors.join(' or ')}.`);
};




/***/ }),

/***/ 41975:
/*!******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-reorder_2.entry.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_reorder": () => (/* binding */ Reorder),
/* harmony export */   "ion_reorder_group": () => (/* binding */ ReorderGroup)
/* harmony export */ });
/* harmony import */ var F_GIT_hypertask_ionic2_hypertask_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ 62783);
/* harmony import */ var _index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-8e692445.js */ 40320);
/* harmony import */ var _index_2bcb741c_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-2bcb741c.js */ 61712);
/* harmony import */ var _ionic_global_c74e4951_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ionic-global-c74e4951.js */ 9656);
/* harmony import */ var _index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-e6d1a8be.js */ 70139);
/* harmony import */ var _helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers-3b390e48.js */ 97140);
/* harmony import */ var _haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./haptic-029a46f6.js */ 56745);
/* harmony import */ var _index_c4b11676_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-c4b11676.js */ 75057);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */







const reorderIosCss = ":host([slot]){display:none;line-height:0;z-index:100}.reorder-icon{display:block;font-size:22px}.reorder-icon{font-size:34px;opacity:0.4}";
const reorderMdCss = ":host([slot]){display:none;line-height:0;z-index:100}.reorder-icon{display:block;font-size:22px}.reorder-icon{font-size:31px;opacity:0.3}";
const Reorder = class {
  constructor(hostRef) {
    (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
  }

  onClick(ev) {
    const reorderGroup = this.el.closest('ion-reorder-group');
    ev.preventDefault(); // Only stop event propagation if the reorder is inside of an enabled
    // reorder group. This allows interaction with clickable children components.

    if (!reorderGroup || !reorderGroup.disabled) {
      ev.stopImmediatePropagation();
    }
  }

  render() {
    const mode = (0,_ionic_global_c74e4951_js__WEBPACK_IMPORTED_MODULE_3__.b)(this);
    const reorderIcon = mode === 'ios' ? _index_2bcb741c_js__WEBPACK_IMPORTED_MODULE_2__.j : _index_2bcb741c_js__WEBPACK_IMPORTED_MODULE_2__.k;
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: mode
    }, (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null, (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)("ion-icon", {
      icon: reorderIcon,
      lazy: false,
      class: "reorder-icon",
      part: "icon"
    })));
  }

  get el() {
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

};
Reorder.style = {
  ios: reorderIosCss,
  md: reorderMdCss
};
const reorderGroupCss = ".reorder-list-active>*{display:block;-webkit-transition:-webkit-transform 300ms;transition:-webkit-transform 300ms;transition:transform 300ms;transition:transform 300ms, -webkit-transform 300ms;will-change:transform}.reorder-enabled{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reorder-enabled ion-reorder{display:block;cursor:-webkit-grab;cursor:grab;pointer-events:all;-ms-touch-action:none;touch-action:none}.reorder-selected,.reorder-selected ion-reorder{cursor:-webkit-grabbing;cursor:grabbing}.reorder-selected{position:relative;-webkit-transition:none !important;transition:none !important;-webkit-box-shadow:0 0 10px rgba(0, 0, 0, 0.4);box-shadow:0 0 10px rgba(0, 0, 0, 0.4);opacity:0.8;z-index:100}.reorder-visible ion-reorder .reorder-icon{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}";
const ReorderGroup = class {
  constructor(hostRef) {
    (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionItemReorder = (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionItemReorder", 7);
    this.lastToIndex = -1;
    this.cachedHeights = [];
    this.scrollElTop = 0;
    this.scrollElBottom = 0;
    this.scrollElInitial = 0;
    this.containerTop = 0;
    this.containerBottom = 0;
    this.state = 0
    /* ReorderGroupState.Idle */
    ;
    /**
     * If `true`, the reorder will be hidden.
     */

    this.disabled = true;
  }

  disabledChanged() {
    if (this.gesture) {
      this.gesture.enable(!this.disabled);
    }
  }

  connectedCallback() {
    var _this = this;

    return (0,F_GIT_hypertask_ionic2_hypertask_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const contentEl = (0,_index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_4__.f)(_this.el);

      if (contentEl) {
        _this.scrollEl = yield (0,_index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_4__.g)(contentEl);
      }

      _this.gesture = (yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./index-422b6e83.js */ 49099))).createGesture({
        el: _this.el,
        gestureName: 'reorder',
        gesturePriority: 110,
        threshold: 0,
        direction: 'y',
        passive: false,
        canStart: detail => _this.canStart(detail),
        onStart: ev => _this.onStart(ev),
        onMove: ev => _this.onMove(ev),
        onEnd: () => _this.onEnd()
      });

      _this.disabledChanged();
    })();
  }

  disconnectedCallback() {
    this.onEnd();

    if (this.gesture) {
      this.gesture.destroy();
      this.gesture = undefined;
    }
  }
  /**
   * Completes the reorder operation. Must be called by the `ionItemReorder` event.
   *
   * If a list of items is passed, the list will be reordered and returned in the
   * proper order.
   *
   * If no parameters are passed or if `true` is passed in, the reorder will complete
   * and the item will remain in the position it was dragged to. If `false` is passed,
   * the reorder will complete and the item will bounce back to its original position.
   *
   * @param listOrReorder A list of items to be sorted and returned in the new order or a
   * boolean of whether or not the reorder should reposition the item.
   */


  complete(listOrReorder) {
    return Promise.resolve(this.completeReorder(listOrReorder));
  }

  canStart(ev) {
    if (this.selectedItemEl || this.state !== 0
    /* ReorderGroupState.Idle */
    ) {
      return false;
    }

    const target = ev.event.target;
    const reorderEl = target.closest('ion-reorder');

    if (!reorderEl) {
      return false;
    }

    const item = findReorderItem(reorderEl, this.el);

    if (!item) {
      return false;
    }

    ev.data = item;
    return true;
  }

  onStart(ev) {
    ev.event.preventDefault();
    const item = this.selectedItemEl = ev.data;
    const heights = this.cachedHeights;
    heights.length = 0;
    const el = this.el;
    const children = el.children;

    if (!children || children.length === 0) {
      return;
    }

    let sum = 0;

    for (let i = 0; i < children.length; i++) {
      const child = children[i];
      sum += child.offsetHeight;
      heights.push(sum);
      child.$ionIndex = i;
    }

    const box = el.getBoundingClientRect();
    this.containerTop = box.top;
    this.containerBottom = box.bottom;

    if (this.scrollEl) {
      const scrollBox = this.scrollEl.getBoundingClientRect();
      this.scrollElInitial = this.scrollEl.scrollTop;
      this.scrollElTop = scrollBox.top + AUTO_SCROLL_MARGIN;
      this.scrollElBottom = scrollBox.bottom - AUTO_SCROLL_MARGIN;
    } else {
      this.scrollElInitial = 0;
      this.scrollElTop = 0;
      this.scrollElBottom = 0;
    }

    this.lastToIndex = indexForItem(item);
    this.selectedItemHeight = item.offsetHeight;
    this.state = 1
    /* ReorderGroupState.Active */
    ;
    item.classList.add(ITEM_REORDER_SELECTED);
    (0,_haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__.a)();
  }

  onMove(ev) {
    const selectedItem = this.selectedItemEl;

    if (!selectedItem) {
      return;
    } // Scroll if we reach the scroll margins


    const scroll = this.autoscroll(ev.currentY); // // Get coordinate

    const top = this.containerTop - scroll;
    const bottom = this.containerBottom - scroll;
    const currentY = Math.max(top, Math.min(ev.currentY, bottom));
    const deltaY = scroll + currentY - ev.startY;
    const normalizedY = currentY - top;
    const toIndex = this.itemIndexForTop(normalizedY);

    if (toIndex !== this.lastToIndex) {
      const fromIndex = indexForItem(selectedItem);
      this.lastToIndex = toIndex;
      (0,_haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__.b)();
      this.reorderMove(fromIndex, toIndex);
    } // Update selected item position


    selectedItem.style.transform = `translateY(${deltaY}px)`;
  }

  onEnd() {
    const selectedItemEl = this.selectedItemEl;
    this.state = 2
    /* ReorderGroupState.Complete */
    ;

    if (!selectedItemEl) {
      this.state = 0
      /* ReorderGroupState.Idle */
      ;
      return;
    }

    const toIndex = this.lastToIndex;
    const fromIndex = indexForItem(selectedItemEl);

    if (toIndex === fromIndex) {
      this.completeReorder();
    } else {
      this.ionItemReorder.emit({
        from: fromIndex,
        to: toIndex,
        complete: this.completeReorder.bind(this)
      });
    }

    (0,_haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__.h)();
  }

  completeReorder(listOrReorder) {
    const selectedItemEl = this.selectedItemEl;

    if (selectedItemEl && this.state === 2
    /* ReorderGroupState.Complete */
    ) {
      const children = this.el.children;
      const len = children.length;
      const toIndex = this.lastToIndex;
      const fromIndex = indexForItem(selectedItemEl);
      /**
       * insertBefore and setting the transform
       * needs to happen in the same frame otherwise
       * there will be a duplicate transition. This primarily
       * impacts Firefox where insertBefore and transform operations
       * are happening in two separate frames.
       */

      (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_5__.r)(() => {
        if (toIndex !== fromIndex && (listOrReorder === undefined || listOrReorder === true)) {
          const ref = fromIndex < toIndex ? children[toIndex + 1] : children[toIndex];
          this.el.insertBefore(selectedItemEl, ref);
        }

        for (let i = 0; i < len; i++) {
          children[i].style['transform'] = '';
        }
      });

      if (Array.isArray(listOrReorder)) {
        listOrReorder = reorderArray(listOrReorder, fromIndex, toIndex);
      }

      selectedItemEl.style.transition = '';
      selectedItemEl.classList.remove(ITEM_REORDER_SELECTED);
      this.selectedItemEl = undefined;
      this.state = 0
      /* ReorderGroupState.Idle */
      ;
    }

    return listOrReorder;
  }

  itemIndexForTop(deltaY) {
    const heights = this.cachedHeights;

    for (let i = 0; i < heights.length; i++) {
      if (heights[i] > deltaY) {
        return i;
      }
    }

    return heights.length - 1;
  }
  /********* DOM WRITE ********* */


  reorderMove(fromIndex, toIndex) {
    const itemHeight = this.selectedItemHeight;
    const children = this.el.children;

    for (let i = 0; i < children.length; i++) {
      const style = children[i].style;
      let value = '';

      if (i > fromIndex && i <= toIndex) {
        value = `translateY(${-itemHeight}px)`;
      } else if (i < fromIndex && i >= toIndex) {
        value = `translateY(${itemHeight}px)`;
      }

      style['transform'] = value;
    }
  }

  autoscroll(posY) {
    if (!this.scrollEl) {
      return 0;
    }

    let amount = 0;

    if (posY < this.scrollElTop) {
      amount = -SCROLL_JUMP;
    } else if (posY > this.scrollElBottom) {
      amount = SCROLL_JUMP;
    }

    if (amount !== 0) {
      this.scrollEl.scrollBy(0, amount);
    }

    return this.scrollEl.scrollTop - this.scrollElInitial;
  }

  render() {
    const mode = (0,_ionic_global_c74e4951_js__WEBPACK_IMPORTED_MODULE_3__.b)(this);
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: {
        [mode]: true,
        'reorder-enabled': !this.disabled,
        'reorder-list-active': this.state !== 0
        /* ReorderGroupState.Idle */

      }
    });
  }

  get el() {
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

  static get watchers() {
    return {
      "disabled": ["disabledChanged"]
    };
  }

};

const indexForItem = element => {
  return element['$ionIndex'];
};

const findReorderItem = (node, container) => {
  let parent;

  while (node) {
    parent = node.parentElement;

    if (parent === container) {
      return node;
    }

    node = parent;
  }

  return undefined;
};

const AUTO_SCROLL_MARGIN = 60;
const SCROLL_JUMP = 10;
const ITEM_REORDER_SELECTED = 'reorder-selected';

const reorderArray = (array, from, to) => {
  const element = array[from];
  array.splice(from, 1);
  array.splice(to, 0, element);
  return array.slice();
};

ReorderGroup.style = reorderGroupCss;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLXJlb3JkZXJfMl9lbnRyeV9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxRQUFRO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxRQUFRO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5QkFBeUIsd0JBQXdCLDZCQUE2QjtBQUN6Rzs7QUFFb0Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU13QixhQUFhLEdBQUcsMklBQXRCO0FBRUEsTUFBTUMsWUFBWSxHQUFHLDJJQUFyQjtBQUVBLE1BQU1DLE9BQU8sR0FBRyxNQUFNO0FBQ3BCQyxFQUFBQSxXQUFXLENBQUNDLE9BQUQsRUFBVTtBQUNuQjNCLElBQUFBLHFEQUFnQixDQUFDLElBQUQsRUFBTzJCLE9BQVAsQ0FBaEI7QUFDRDs7QUFDREMsRUFBQUEsT0FBTyxDQUFDQyxFQUFELEVBQUs7QUFDVixVQUFNQyxZQUFZLEdBQUcsS0FBS0MsRUFBTCxDQUFRQyxPQUFSLENBQWdCLG1CQUFoQixDQUFyQjtBQUNBSCxJQUFBQSxFQUFFLENBQUNJLGNBQUgsR0FGVSxDQUdWO0FBQ0E7O0FBQ0EsUUFBSSxDQUFDSCxZQUFELElBQWlCLENBQUNBLFlBQVksQ0FBQ0ksUUFBbkMsRUFBNkM7QUFDM0NMLE1BQUFBLEVBQUUsQ0FBQ00sd0JBQUg7QUFDRDtBQUNGOztBQUNEQyxFQUFBQSxNQUFNLEdBQUc7QUFDUCxVQUFNQyxJQUFJLEdBQUd4Qiw0REFBVSxDQUFDLElBQUQsQ0FBdkI7QUFDQSxVQUFNeUIsV0FBVyxH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QUFEO0FBRGlCLEtBQVA7QUFFcEI7O0FBdFBxQixDQUEzQjs7QUF3UEEsTUFBTXRDLFlBQVksR0FBSXVDLE9BQUQsSUFBYTtBQUNoQyxTQUFPQSxPQUFPLENBQUMsV0FBRCxDQUFkO0FBQ0QsQ0FGRDs7QUFHQSxNQUFNeEQsZUFBZSxHQUFHLENBQUN5RCxJQUFELEVBQU9DLFNBQVAsS0FBcUI7QUFDM0MsTUFBSUMsTUFBSjs7QUFDQSxTQUFPRixJQUFQLEVBQWE7QUFDWEUsSUFBQUEsTUFBTSxHQUFHRixJQUFJLENBQUNHLGFBQWQ7O0FBQ0EsUUFBSUQsTUFBTSxLQUFLRCxTQUFmLEVBQTBCO0FBQ3hCLGFBQU9ELElBQVA7QUFDRDs7QUFDREEsSUFBQUEsSUFBSSxHQUFHRSxNQUFQO0FBQ0Q7O0FBQ0QsU0FBT3RFLFNBQVA7QUFDRCxDQVZEOztBQVdBLE1BQU0yQixrQkFBa0IsR0FBRyxFQUEzQjtBQUNBLE1BQU1xQyxXQUFXLEdBQUcsRUFBcEI7QUFDQSxNQUFNaEMscUJBQXFCLEdBQUcsa0JBQTlCOztBQUNBLE1BQU15QixZQUFZLEdBQUcsQ0FBQ2UsS0FBRCxFQUFRdkIsSUFBUixFQUFjQyxFQUFkLEtBQXFCO0FBQ3hDLFFBQU1pQixPQUFPLEdBQUdLLEtBQUssQ0FBQ3ZCLElBQUQsQ0FBckI7QUFDQXVCLEVBQUFBLEtBQUssQ0FBQ0MsTUFBTixDQUFheEIsSUFBYixFQUFtQixDQUFuQjtBQUNBdUIsRUFBQUEsS0FBSyxDQUFDQyxNQUFOLENBQWF2QixFQUFiLEVBQWlCLENBQWpCLEVBQW9CaUIsT0FBcEI7QUFDQSxTQUFPSyxLQUFLLENBQUNFLEtBQU4sRUFBUDtBQUNELENBTEQ7O0FBTUF2RyxZQUFZLENBQUNKLEtBQWIsR0FBcUJHLGVBQXJCIiwic291cmNlcyI6WyIuL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbmRleC1jNGIxMTY3Ni5qcyIsIi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lvbi1yZW9yZGVyXzIuZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbi8qKlxuICogTG9ncyBhIHdhcm5pbmcgdG8gdGhlIGNvbnNvbGUgd2l0aCBhbiBJb25pYyBwcmVmaXhcbiAqIHRvIGluZGljYXRlIHRoZSBsaWJyYXJ5IHRoYXQgaXMgd2FybmluZyB0aGUgZGV2ZWxvcGVyLlxuICpcbiAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIHN0cmluZyBtZXNzYWdlIHRvIGJlIGxvZ2dlZCB0byB0aGUgY29uc29sZS5cbiAqL1xuY29uc3QgcHJpbnRJb25XYXJuaW5nID0gKG1lc3NhZ2UsIC4uLnBhcmFtcykgPT4ge1xuICByZXR1cm4gY29uc29sZS53YXJuKGBbSW9uaWMgV2FybmluZ106ICR7bWVzc2FnZX1gLCAuLi5wYXJhbXMpO1xufTtcbi8qXG4gKiBMb2dzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlIHdpdGggYW4gSW9uaWMgcHJlZml4XG4gKiB0byBpbmRpY2F0ZSB0aGUgbGlicmFyeSB0aGF0IGlzIHdhcm5pbmcgdGhlIGRldmVsb3Blci5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBzdHJpbmcgbWVzc2FnZSB0byBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGUuXG4gKiBAcGFyYW0gcGFyYW1zIC0gQWRkaXRpb25hbCBhcmd1bWVudHMgdG8gc3VwcGx5IHRvIHRoZSBjb25zb2xlLmVycm9yLlxuICovXG5jb25zdCBwcmludElvbkVycm9yID0gKG1lc3NhZ2UsIC4uLnBhcmFtcykgPT4ge1xuICByZXR1cm4gY29uc29sZS5lcnJvcihgW0lvbmljIEVycm9yXTogJHttZXNzYWdlfWAsIC4uLnBhcmFtcyk7XG59O1xuLyoqXG4gKiBQcmludHMgYW4gZXJyb3IgaW5mb3JtaW5nIGRldmVsb3BlcnMgdGhhdCBhbiBpbXBsZW1lbnRhdGlvbiByZXF1aXJlcyBhbiBlbGVtZW50IHRvIGJlIHVzZWRcbiAqIHdpdGhpbiBhIHNwZWNpZmljIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSBlbCBUaGUgd2ViIGNvbXBvbmVudCBlbGVtZW50IHRoaXMgaXMgcmVxdWlyaW5nIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHRhcmdldFNlbGVjdG9ycyBUaGUgc2VsZWN0b3Igb3Igc2VsZWN0b3JzIHRoYXQgd2VyZSBub3QgZm91bmQuXG4gKi9cbmNvbnN0IHByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IgPSAoZWwsIC4uLnRhcmdldFNlbGVjdG9ycykgPT4ge1xuICByZXR1cm4gY29uc29sZS5lcnJvcihgPCR7ZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpfT4gbXVzdCBiZSB1c2VkIGluc2lkZSAke3RhcmdldFNlbGVjdG9ycy5qb2luKCcgb3IgJyl9LmApO1xufTtcblxuZXhwb3J0IHsgcHJpbnRSZXF1aXJlZEVsZW1lbnRFcnJvciBhcyBhLCBwcmludElvbkVycm9yIGFzIGIsIHByaW50SW9uV2FybmluZyBhcyBwIH07XG4iLCIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBoLCBIIGFzIEhvc3QsIGkgYXMgZ2V0RWxlbWVudCwgZSBhcyBjcmVhdGVFdmVudCB9IGZyb20gJy4vaW5kZXgtOGU2OTI0NDUuanMnO1xuaW1wb3J0IHsgaiBhcyByZW9yZGVyVGhyZWVPdXRsaW5lLCBrIGFzIHJlb3JkZXJUd29TaGFycCB9IGZyb20gJy4vaW5kZXgtMmJjYjc0MWMuanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRJb25Nb2RlIH0gZnJvbSAnLi9pb25pYy1nbG9iYWwtYzc0ZTQ5NTEuanMnO1xuaW1wb3J0IHsgZiBhcyBmaW5kQ2xvc2VzdElvbkNvbnRlbnQsIGcgYXMgZ2V0U2Nyb2xsRWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZTZkMWE4YmUuanMnO1xuaW1wb3J0IHsgciBhcyByYWYgfSBmcm9tICcuL2hlbHBlcnMtM2IzOTBlNDguanMnO1xuaW1wb3J0IHsgYSBhcyBoYXB0aWNTZWxlY3Rpb25TdGFydCwgYiBhcyBoYXB0aWNTZWxlY3Rpb25DaGFuZ2VkLCBoIGFzIGhhcHRpY1NlbGVjdGlvbkVuZCB9IGZyb20gJy4vaGFwdGljLTAyOWE0NmY2LmpzJztcbmltcG9ydCAnLi9pbmRleC1jNGIxMTY3Ni5qcyc7XG5cbmNvbnN0IHJlb3JkZXJJb3NDc3MgPSBcIjpob3N0KFtzbG90XSl7ZGlzcGxheTpub25lO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDB9LnJlb3JkZXItaWNvbntkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZToyMnB4fS5yZW9yZGVyLWljb257Zm9udC1zaXplOjM0cHg7b3BhY2l0eTowLjR9XCI7XG5cbmNvbnN0IHJlb3JkZXJNZENzcyA9IFwiOmhvc3QoW3Nsb3RdKXtkaXNwbGF5Om5vbmU7bGluZS1oZWlnaHQ6MDt6LWluZGV4OjEwMH0ucmVvcmRlci1pY29ue2Rpc3BsYXk6YmxvY2s7Zm9udC1zaXplOjIycHh9LnJlb3JkZXItaWNvbntmb250LXNpemU6MzFweDtvcGFjaXR5OjAuM31cIjtcblxuY29uc3QgUmVvcmRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gIH1cbiAgb25DbGljayhldikge1xuICAgIGNvbnN0IHJlb3JkZXJHcm91cCA9IHRoaXMuZWwuY2xvc2VzdCgnaW9uLXJlb3JkZXItZ3JvdXAnKTtcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIE9ubHkgc3RvcCBldmVudCBwcm9wYWdhdGlvbiBpZiB0aGUgcmVvcmRlciBpcyBpbnNpZGUgb2YgYW4gZW5hYmxlZFxuICAgIC8vIHJlb3JkZXIgZ3JvdXAuIFRoaXMgYWxsb3dzIGludGVyYWN0aW9uIHdpdGggY2xpY2thYmxlIGNoaWxkcmVuIGNvbXBvbmVudHMuXG4gICAgaWYgKCFyZW9yZGVyR3JvdXAgfHwgIXJlb3JkZXJHcm91cC5kaXNhYmxlZCkge1xuICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICBjb25zdCByZW9yZGVySWNvbiA9IG1vZGUgPT09ICdpb3MnID8gcmVvcmRlclRocmVlT3V0bGluZSA6IHJlb3JkZXJUd29TaGFycDtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczogbW9kZSB9LCBoKFwic2xvdFwiLCBudWxsLCBoKFwiaW9uLWljb25cIiwgeyBpY29uOiByZW9yZGVySWNvbiwgbGF6eTogZmFsc2UsIGNsYXNzOiBcInJlb3JkZXItaWNvblwiLCBwYXJ0OiBcImljb25cIiB9KSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuUmVvcmRlci5zdHlsZSA9IHtcbiAgaW9zOiByZW9yZGVySW9zQ3NzLFxuICBtZDogcmVvcmRlck1kQ3NzXG59O1xuXG5jb25zdCByZW9yZGVyR3JvdXBDc3MgPSBcIi5yZW9yZGVyLWxpc3QtYWN0aXZlPip7ZGlzcGxheTpibG9jazstd2Via2l0LXRyYW5zaXRpb246LXdlYmtpdC10cmFuc2Zvcm0gMzAwbXM7dHJhbnNpdGlvbjotd2Via2l0LXRyYW5zZm9ybSAzMDBtczt0cmFuc2l0aW9uOnRyYW5zZm9ybSAzMDBtczt0cmFuc2l0aW9uOnRyYW5zZm9ybSAzMDBtcywgLXdlYmtpdC10cmFuc2Zvcm0gMzAwbXM7d2lsbC1jaGFuZ2U6dHJhbnNmb3JtfS5yZW9yZGVyLWVuYWJsZWR7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5yZW9yZGVyLWVuYWJsZWQgaW9uLXJlb3JkZXJ7ZGlzcGxheTpibG9jaztjdXJzb3I6LXdlYmtpdC1ncmFiO2N1cnNvcjpncmFiO3BvaW50ZXItZXZlbnRzOmFsbDstbXMtdG91Y2gtYWN0aW9uOm5vbmU7dG91Y2gtYWN0aW9uOm5vbmV9LnJlb3JkZXItc2VsZWN0ZWQsLnJlb3JkZXItc2VsZWN0ZWQgaW9uLXJlb3JkZXJ7Y3Vyc29yOi13ZWJraXQtZ3JhYmJpbmc7Y3Vyc29yOmdyYWJiaW5nfS5yZW9yZGVyLXNlbGVjdGVke3Bvc2l0aW9uOnJlbGF0aXZlOy13ZWJraXQtdHJhbnNpdGlvbjpub25lICFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpub25lICFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC40KTtib3gtc2hhZG93OjAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC40KTtvcGFjaXR5OjAuODt6LWluZGV4OjEwMH0ucmVvcmRlci12aXNpYmxlIGlvbi1yZW9yZGVyIC5yZW9yZGVyLWljb257LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgIDAsICAwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgIDAsICAwKX1cIjtcblxuY29uc3QgUmVvcmRlckdyb3VwID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmlvbkl0ZW1SZW9yZGVyID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25JdGVtUmVvcmRlclwiLCA3KTtcbiAgICB0aGlzLmxhc3RUb0luZGV4ID0gLTE7XG4gICAgdGhpcy5jYWNoZWRIZWlnaHRzID0gW107XG4gICAgdGhpcy5zY3JvbGxFbFRvcCA9IDA7XG4gICAgdGhpcy5zY3JvbGxFbEJvdHRvbSA9IDA7XG4gICAgdGhpcy5zY3JvbGxFbEluaXRpYWwgPSAwO1xuICAgIHRoaXMuY29udGFpbmVyVG9wID0gMDtcbiAgICB0aGlzLmNvbnRhaW5lckJvdHRvbSA9IDA7XG4gICAgdGhpcy5zdGF0ZSA9IDAgLyogUmVvcmRlckdyb3VwU3RhdGUuSWRsZSAqLztcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSByZW9yZGVyIHdpbGwgYmUgaGlkZGVuLlxuICAgICAqL1xuICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIGRpc2FibGVkQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5nZXN0dXJlKSB7XG4gICAgICB0aGlzLmdlc3R1cmUuZW5hYmxlKCF0aGlzLmRpc2FibGVkKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgY29udGVudEVsID0gZmluZENsb3Nlc3RJb25Db250ZW50KHRoaXMuZWwpO1xuICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgIHRoaXMuc2Nyb2xsRWwgPSBhd2FpdCBnZXRTY3JvbGxFbGVtZW50KGNvbnRlbnRFbCk7XG4gICAgfVxuICAgIHRoaXMuZ2VzdHVyZSA9IChhd2FpdCBpbXBvcnQoJy4vaW5kZXgtNDIyYjZlODMuanMnKSkuY3JlYXRlR2VzdHVyZSh7XG4gICAgICBlbDogdGhpcy5lbCxcbiAgICAgIGdlc3R1cmVOYW1lOiAncmVvcmRlcicsXG4gICAgICBnZXN0dXJlUHJpb3JpdHk6IDExMCxcbiAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgIGRpcmVjdGlvbjogJ3knLFxuICAgICAgcGFzc2l2ZTogZmFsc2UsXG4gICAgICBjYW5TdGFydDogKGRldGFpbCkgPT4gdGhpcy5jYW5TdGFydChkZXRhaWwpLFxuICAgICAgb25TdGFydDogKGV2KSA9PiB0aGlzLm9uU3RhcnQoZXYpLFxuICAgICAgb25Nb3ZlOiAoZXYpID0+IHRoaXMub25Nb3ZlKGV2KSxcbiAgICAgIG9uRW5kOiAoKSA9PiB0aGlzLm9uRW5kKCksXG4gICAgfSk7XG4gICAgdGhpcy5kaXNhYmxlZENoYW5nZWQoKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLm9uRW5kKCk7XG4gICAgaWYgKHRoaXMuZ2VzdHVyZSkge1xuICAgICAgdGhpcy5nZXN0dXJlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuZ2VzdHVyZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXBsZXRlcyB0aGUgcmVvcmRlciBvcGVyYXRpb24uIE11c3QgYmUgY2FsbGVkIGJ5IHRoZSBgaW9uSXRlbVJlb3JkZXJgIGV2ZW50LlxuICAgKlxuICAgKiBJZiBhIGxpc3Qgb2YgaXRlbXMgaXMgcGFzc2VkLCB0aGUgbGlzdCB3aWxsIGJlIHJlb3JkZXJlZCBhbmQgcmV0dXJuZWQgaW4gdGhlXG4gICAqIHByb3BlciBvcmRlci5cbiAgICpcbiAgICogSWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkIG9yIGlmIGB0cnVlYCBpcyBwYXNzZWQgaW4sIHRoZSByZW9yZGVyIHdpbGwgY29tcGxldGVcbiAgICogYW5kIHRoZSBpdGVtIHdpbGwgcmVtYWluIGluIHRoZSBwb3NpdGlvbiBpdCB3YXMgZHJhZ2dlZCB0by4gSWYgYGZhbHNlYCBpcyBwYXNzZWQsXG4gICAqIHRoZSByZW9yZGVyIHdpbGwgY29tcGxldGUgYW5kIHRoZSBpdGVtIHdpbGwgYm91bmNlIGJhY2sgdG8gaXRzIG9yaWdpbmFsIHBvc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gbGlzdE9yUmVvcmRlciBBIGxpc3Qgb2YgaXRlbXMgdG8gYmUgc29ydGVkIGFuZCByZXR1cm5lZCBpbiB0aGUgbmV3IG9yZGVyIG9yIGFcbiAgICogYm9vbGVhbiBvZiB3aGV0aGVyIG9yIG5vdCB0aGUgcmVvcmRlciBzaG91bGQgcmVwb3NpdGlvbiB0aGUgaXRlbS5cbiAgICovXG4gIGNvbXBsZXRlKGxpc3RPclJlb3JkZXIpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29tcGxldGVSZW9yZGVyKGxpc3RPclJlb3JkZXIpKTtcbiAgfVxuICBjYW5TdGFydChldikge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbUVsIHx8IHRoaXMuc3RhdGUgIT09IDAgLyogUmVvcmRlckdyb3VwU3RhdGUuSWRsZSAqLykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBldi5ldmVudC50YXJnZXQ7XG4gICAgY29uc3QgcmVvcmRlckVsID0gdGFyZ2V0LmNsb3Nlc3QoJ2lvbi1yZW9yZGVyJyk7XG4gICAgaWYgKCFyZW9yZGVyRWwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXRlbSA9IGZpbmRSZW9yZGVySXRlbShyZW9yZGVyRWwsIHRoaXMuZWwpO1xuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldi5kYXRhID0gaXRlbTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBvblN0YXJ0KGV2KSB7XG4gICAgZXYuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBpdGVtID0gKHRoaXMuc2VsZWN0ZWRJdGVtRWwgPSBldi5kYXRhKTtcbiAgICBjb25zdCBoZWlnaHRzID0gdGhpcy5jYWNoZWRIZWlnaHRzO1xuICAgIGhlaWdodHMubGVuZ3RoID0gMDtcbiAgICBjb25zdCBlbCA9IHRoaXMuZWw7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBlbC5jaGlsZHJlbjtcbiAgICBpZiAoIWNoaWxkcmVuIHx8IGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgc3VtID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgc3VtICs9IGNoaWxkLm9mZnNldEhlaWdodDtcbiAgICAgIGhlaWdodHMucHVzaChzdW0pO1xuICAgICAgY2hpbGQuJGlvbkluZGV4ID0gaTtcbiAgICB9XG4gICAgY29uc3QgYm94ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdGhpcy5jb250YWluZXJUb3AgPSBib3gudG9wO1xuICAgIHRoaXMuY29udGFpbmVyQm90dG9tID0gYm94LmJvdHRvbTtcbiAgICBpZiAodGhpcy5zY3JvbGxFbCkge1xuICAgICAgY29uc3Qgc2Nyb2xsQm94ID0gdGhpcy5zY3JvbGxFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuc2Nyb2xsRWxJbml0aWFsID0gdGhpcy5zY3JvbGxFbC5zY3JvbGxUb3A7XG4gICAgICB0aGlzLnNjcm9sbEVsVG9wID0gc2Nyb2xsQm94LnRvcCArIEFVVE9fU0NST0xMX01BUkdJTjtcbiAgICAgIHRoaXMuc2Nyb2xsRWxCb3R0b20gPSBzY3JvbGxCb3guYm90dG9tIC0gQVVUT19TQ1JPTExfTUFSR0lOO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsRWxJbml0aWFsID0gMDtcbiAgICAgIHRoaXMuc2Nyb2xsRWxUb3AgPSAwO1xuICAgICAgdGhpcy5zY3JvbGxFbEJvdHRvbSA9IDA7XG4gICAgfVxuICAgIHRoaXMubGFzdFRvSW5kZXggPSBpbmRleEZvckl0ZW0oaXRlbSk7XG4gICAgdGhpcy5zZWxlY3RlZEl0ZW1IZWlnaHQgPSBpdGVtLm9mZnNldEhlaWdodDtcbiAgICB0aGlzLnN0YXRlID0gMSAvKiBSZW9yZGVyR3JvdXBTdGF0ZS5BY3RpdmUgKi87XG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKElURU1fUkVPUkRFUl9TRUxFQ1RFRCk7XG4gICAgaGFwdGljU2VsZWN0aW9uU3RhcnQoKTtcbiAgfVxuICBvbk1vdmUoZXYpIHtcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB0aGlzLnNlbGVjdGVkSXRlbUVsO1xuICAgIGlmICghc2VsZWN0ZWRJdGVtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFNjcm9sbCBpZiB3ZSByZWFjaCB0aGUgc2Nyb2xsIG1hcmdpbnNcbiAgICBjb25zdCBzY3JvbGwgPSB0aGlzLmF1dG9zY3JvbGwoZXYuY3VycmVudFkpO1xuICAgIC8vIC8vIEdldCBjb29yZGluYXRlXG4gICAgY29uc3QgdG9wID0gdGhpcy5jb250YWluZXJUb3AgLSBzY3JvbGw7XG4gICAgY29uc3QgYm90dG9tID0gdGhpcy5jb250YWluZXJCb3R0b20gLSBzY3JvbGw7XG4gICAgY29uc3QgY3VycmVudFkgPSBNYXRoLm1heCh0b3AsIE1hdGgubWluKGV2LmN1cnJlbnRZLCBib3R0b20pKTtcbiAgICBjb25zdCBkZWx0YVkgPSBzY3JvbGwgKyBjdXJyZW50WSAtIGV2LnN0YXJ0WTtcbiAgICBjb25zdCBub3JtYWxpemVkWSA9IGN1cnJlbnRZIC0gdG9wO1xuICAgIGNvbnN0IHRvSW5kZXggPSB0aGlzLml0ZW1JbmRleEZvclRvcChub3JtYWxpemVkWSk7XG4gICAgaWYgKHRvSW5kZXggIT09IHRoaXMubGFzdFRvSW5kZXgpIHtcbiAgICAgIGNvbnN0IGZyb21JbmRleCA9IGluZGV4Rm9ySXRlbShzZWxlY3RlZEl0ZW0pO1xuICAgICAgdGhpcy5sYXN0VG9JbmRleCA9IHRvSW5kZXg7XG4gICAgICBoYXB0aWNTZWxlY3Rpb25DaGFuZ2VkKCk7XG4gICAgICB0aGlzLnJlb3JkZXJNb3ZlKGZyb21JbmRleCwgdG9JbmRleCk7XG4gICAgfVxuICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBpdGVtIHBvc2l0aW9uXG4gICAgc2VsZWN0ZWRJdGVtLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7ZGVsdGFZfXB4KWA7XG4gIH1cbiAgb25FbmQoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtRWwgPSB0aGlzLnNlbGVjdGVkSXRlbUVsO1xuICAgIHRoaXMuc3RhdGUgPSAyIC8qIFJlb3JkZXJHcm91cFN0YXRlLkNvbXBsZXRlICovO1xuICAgIGlmICghc2VsZWN0ZWRJdGVtRWwpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFJlb3JkZXJHcm91cFN0YXRlLklkbGUgKi87XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvSW5kZXggPSB0aGlzLmxhc3RUb0luZGV4O1xuICAgIGNvbnN0IGZyb21JbmRleCA9IGluZGV4Rm9ySXRlbShzZWxlY3RlZEl0ZW1FbCk7XG4gICAgaWYgKHRvSW5kZXggPT09IGZyb21JbmRleCkge1xuICAgICAgdGhpcy5jb21wbGV0ZVJlb3JkZXIoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmlvbkl0ZW1SZW9yZGVyLmVtaXQoe1xuICAgICAgICBmcm9tOiBmcm9tSW5kZXgsXG4gICAgICAgIHRvOiB0b0luZGV4LFxuICAgICAgICBjb21wbGV0ZTogdGhpcy5jb21wbGV0ZVJlb3JkZXIuYmluZCh0aGlzKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBoYXB0aWNTZWxlY3Rpb25FbmQoKTtcbiAgfVxuICBjb21wbGV0ZVJlb3JkZXIobGlzdE9yUmVvcmRlcikge1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbUVsID0gdGhpcy5zZWxlY3RlZEl0ZW1FbDtcbiAgICBpZiAoc2VsZWN0ZWRJdGVtRWwgJiYgdGhpcy5zdGF0ZSA9PT0gMiAvKiBSZW9yZGVyR3JvdXBTdGF0ZS5Db21wbGV0ZSAqLykge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmVsLmNoaWxkcmVuO1xuICAgICAgY29uc3QgbGVuID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgY29uc3QgdG9JbmRleCA9IHRoaXMubGFzdFRvSW5kZXg7XG4gICAgICBjb25zdCBmcm9tSW5kZXggPSBpbmRleEZvckl0ZW0oc2VsZWN0ZWRJdGVtRWwpO1xuICAgICAgLyoqXG4gICAgICAgKiBpbnNlcnRCZWZvcmUgYW5kIHNldHRpbmcgdGhlIHRyYW5zZm9ybVxuICAgICAgICogbmVlZHMgdG8gaGFwcGVuIGluIHRoZSBzYW1lIGZyYW1lIG90aGVyd2lzZVxuICAgICAgICogdGhlcmUgd2lsbCBiZSBhIGR1cGxpY2F0ZSB0cmFuc2l0aW9uLiBUaGlzIHByaW1hcmlseVxuICAgICAgICogaW1wYWN0cyBGaXJlZm94IHdoZXJlIGluc2VydEJlZm9yZSBhbmQgdHJhbnNmb3JtIG9wZXJhdGlvbnNcbiAgICAgICAqIGFyZSBoYXBwZW5pbmcgaW4gdHdvIHNlcGFyYXRlIGZyYW1lcy5cbiAgICAgICAqL1xuICAgICAgcmFmKCgpID0+IHtcbiAgICAgICAgaWYgKHRvSW5kZXggIT09IGZyb21JbmRleCAmJiAobGlzdE9yUmVvcmRlciA9PT0gdW5kZWZpbmVkIHx8IGxpc3RPclJlb3JkZXIgPT09IHRydWUpKSB7XG4gICAgICAgICAgY29uc3QgcmVmID0gZnJvbUluZGV4IDwgdG9JbmRleCA/IGNoaWxkcmVuW3RvSW5kZXggKyAxXSA6IGNoaWxkcmVuW3RvSW5kZXhdO1xuICAgICAgICAgIHRoaXMuZWwuaW5zZXJ0QmVmb3JlKHNlbGVjdGVkSXRlbUVsLCByZWYpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZHJlbltpXS5zdHlsZVsndHJhbnNmb3JtJ10gPSAnJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0T3JSZW9yZGVyKSkge1xuICAgICAgICBsaXN0T3JSZW9yZGVyID0gcmVvcmRlckFycmF5KGxpc3RPclJlb3JkZXIsIGZyb21JbmRleCwgdG9JbmRleCk7XG4gICAgICB9XG4gICAgICBzZWxlY3RlZEl0ZW1FbC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgICBzZWxlY3RlZEl0ZW1FbC5jbGFzc0xpc3QucmVtb3ZlKElURU1fUkVPUkRFUl9TRUxFQ1RFRCk7XG4gICAgICB0aGlzLnNlbGVjdGVkSXRlbUVsID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUmVvcmRlckdyb3VwU3RhdGUuSWRsZSAqLztcbiAgICB9XG4gICAgcmV0dXJuIGxpc3RPclJlb3JkZXI7XG4gIH1cbiAgaXRlbUluZGV4Rm9yVG9wKGRlbHRhWSkge1xuICAgIGNvbnN0IGhlaWdodHMgPSB0aGlzLmNhY2hlZEhlaWdodHM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaGVpZ2h0c1tpXSA+IGRlbHRhWSkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhlaWdodHMubGVuZ3RoIC0gMTtcbiAgfVxuICAvKioqKioqKioqIERPTSBXUklURSAqKioqKioqKiogKi9cbiAgcmVvcmRlck1vdmUoZnJvbUluZGV4LCB0b0luZGV4KSB7XG4gICAgY29uc3QgaXRlbUhlaWdodCA9IHRoaXMuc2VsZWN0ZWRJdGVtSGVpZ2h0O1xuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5lbC5jaGlsZHJlbjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzdHlsZSA9IGNoaWxkcmVuW2ldLnN0eWxlO1xuICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICBpZiAoaSA+IGZyb21JbmRleCAmJiBpIDw9IHRvSW5kZXgpIHtcbiAgICAgICAgdmFsdWUgPSBgdHJhbnNsYXRlWSgkey1pdGVtSGVpZ2h0fXB4KWA7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpIDwgZnJvbUluZGV4ICYmIGkgPj0gdG9JbmRleCkge1xuICAgICAgICB2YWx1ZSA9IGB0cmFuc2xhdGVZKCR7aXRlbUhlaWdodH1weClgO1xuICAgICAgfVxuICAgICAgc3R5bGVbJ3RyYW5zZm9ybSddID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIGF1dG9zY3JvbGwocG9zWSkge1xuICAgIGlmICghdGhpcy5zY3JvbGxFbCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGxldCBhbW91bnQgPSAwO1xuICAgIGlmIChwb3NZIDwgdGhpcy5zY3JvbGxFbFRvcCkge1xuICAgICAgYW1vdW50ID0gLVNDUk9MTF9KVU1QO1xuICAgIH1cbiAgICBlbHNlIGlmIChwb3NZID4gdGhpcy5zY3JvbGxFbEJvdHRvbSkge1xuICAgICAgYW1vdW50ID0gU0NST0xMX0pVTVA7XG4gICAgfVxuICAgIGlmIChhbW91bnQgIT09IDApIHtcbiAgICAgIHRoaXMuc2Nyb2xsRWwuc2Nyb2xsQnkoMCwgYW1vdW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsRWwuc2Nyb2xsVG9wIC0gdGhpcy5zY3JvbGxFbEluaXRpYWw7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgIHJldHVybiAoaChIb3N0LCB7IGNsYXNzOiB7XG4gICAgICAgIFttb2RlXTogdHJ1ZSxcbiAgICAgICAgJ3Jlb3JkZXItZW5hYmxlZCc6ICF0aGlzLmRpc2FibGVkLFxuICAgICAgICAncmVvcmRlci1saXN0LWFjdGl2ZSc6IHRoaXMuc3RhdGUgIT09IDAgLyogUmVvcmRlckdyb3VwU3RhdGUuSWRsZSAqLyxcbiAgICAgIH0gfSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcImRpc2FibGVkXCI6IFtcImRpc2FibGVkQ2hhbmdlZFwiXVxuICB9OyB9XG59O1xuY29uc3QgaW5kZXhGb3JJdGVtID0gKGVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIGVsZW1lbnRbJyRpb25JbmRleCddO1xufTtcbmNvbnN0IGZpbmRSZW9yZGVySXRlbSA9IChub2RlLCBjb250YWluZXIpID0+IHtcbiAgbGV0IHBhcmVudDtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBwYXJlbnQgPSBub2RlLnBhcmVudEVsZW1lbnQ7XG4gICAgaWYgKHBhcmVudCA9PT0gY29udGFpbmVyKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgbm9kZSA9IHBhcmVudDtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmNvbnN0IEFVVE9fU0NST0xMX01BUkdJTiA9IDYwO1xuY29uc3QgU0NST0xMX0pVTVAgPSAxMDtcbmNvbnN0IElURU1fUkVPUkRFUl9TRUxFQ1RFRCA9ICdyZW9yZGVyLXNlbGVjdGVkJztcbmNvbnN0IHJlb3JkZXJBcnJheSA9IChhcnJheSwgZnJvbSwgdG8pID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGFycmF5W2Zyb21dO1xuICBhcnJheS5zcGxpY2UoZnJvbSwgMSk7XG4gIGFycmF5LnNwbGljZSh0bywgMCwgZWxlbWVudCk7XG4gIHJldHVybiBhcnJheS5zbGljZSgpO1xufTtcblJlb3JkZXJHcm91cC5zdHlsZSA9IHJlb3JkZXJHcm91cENzcztcblxuZXhwb3J0IHsgUmVvcmRlciBhcyBpb25fcmVvcmRlciwgUmVvcmRlckdyb3VwIGFzIGlvbl9yZW9yZGVyX2dyb3VwIH07XG4iXSwibmFtZXMiOlsiciIsInJlZ2lzdGVySW5zdGFuY2UiLCJoIiwiSCIsIkhvc3QiLCJpIiwiZ2V0RWxlbWVudCIsImUiLCJjcmVhdGVFdmVudCIsImoiLCJyZW9yZGVyVGhyZWVPdXRsaW5lIiwiayIsInJlb3JkZXJUd29TaGFycCIsImIiLCJnZXRJb25Nb2RlIiwiZiIsImZpbmRDbG9zZXN0SW9uQ29udGVudCIsImciLCJnZXRTY3JvbGxFbGVtZW50IiwicmFmIiwiYSIsImhhcHRpY1NlbGVjdGlvblN0YXJ0IiwiaGFwdGljU2VsZWN0aW9uQ2hhbmdlZCIsImhhcHRpY1NlbGVjdGlvbkVuZCIsInJlb3JkZXJJb3NDc3MiLCJyZW9yZGVyTWRDc3MiLCJSZW9yZGVyIiwiY29uc3RydWN0b3IiLCJob3N0UmVmIiwib25DbGljayIsImV2IiwicmVvcmRlckdyb3VwIiwiZWwiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJkaXNhYmxlZCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInJlbmRlciIsIm1vZGUiLCJyZW9yZGVySWNvbiIsImNsYXNzIiwiaWNvbiIsImxhenkiLCJwYXJ0Iiwic3R5bGUiLCJpb3MiLCJtZCIsInJlb3JkZXJHcm91cENzcyIsIlJlb3JkZXJHcm91cCIsImlvbkl0ZW1SZW9yZGVyIiwibGFzdFRvSW5kZXgiLCJjYWNoZWRIZWlnaHRzIiwic2Nyb2xsRWxUb3AiLCJzY3JvbGxFbEJvdHRvbSIsInNjcm9sbEVsSW5pdGlhbCIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsInN0YXRlIiwiZGlzYWJsZWRDaGFuZ2VkIiwiZ2VzdHVyZSIsImVuYWJsZSIsImNvbm5lY3RlZENhbGxiYWNrIiwiY29udGVudEVsIiwic2Nyb2xsRWwiLCJjcmVhdGVHZXN0dXJlIiwiZ2VzdHVyZU5hbWUiLCJnZXN0dXJlUHJpb3JpdHkiLCJ0aHJlc2hvbGQiLCJkaXJlY3Rpb24iLCJwYXNzaXZlIiwiY2FuU3RhcnQiLCJkZXRhaWwiLCJvblN0YXJ0Iiwib25Nb3ZlIiwib25FbmQiLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsImRlc3Ryb3kiLCJ1bmRlZmluZWQiLCJjb21wbGV0ZSIsImxpc3RPclJlb3JkZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNvbXBsZXRlUmVvcmRlciIsInNlbGVjdGVkSXRlbUVsIiwidGFyZ2V0IiwiZXZlbnQiLCJyZW9yZGVyRWwiLCJpdGVtIiwiZmluZFJlb3JkZXJJdGVtIiwiZGF0YSIsImhlaWdodHMiLCJsZW5ndGgiLCJjaGlsZHJlbiIsInN1bSIsImNoaWxkIiwib2Zmc2V0SGVpZ2h0IiwicHVzaCIsIiRpb25JbmRleCIsImJveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImJvdHRvbSIsInNjcm9sbEJveCIsInNjcm9sbFRvcCIsIkFVVE9fU0NST0xMX01BUkdJTiIsImluZGV4Rm9ySXRlbSIsInNlbGVjdGVkSXRlbUhlaWdodCIsImNsYXNzTGlzdCIsImFkZCIsIklURU1fUkVPUkRFUl9TRUxFQ1RFRCIsInNlbGVjdGVkSXRlbSIsInNjcm9sbCIsImF1dG9zY3JvbGwiLCJjdXJyZW50WSIsIk1hdGgiLCJtYXgiLCJtaW4iLCJkZWx0YVkiLCJzdGFydFkiLCJub3JtYWxpemVkWSIsInRvSW5kZXgiLCJpdGVtSW5kZXhGb3JUb3AiLCJmcm9tSW5kZXgiLCJyZW9yZGVyTW92ZSIsInRyYW5zZm9ybSIsImVtaXQiLCJmcm9tIiwidG8iLCJiaW5kIiwibGVuIiwicmVmIiwiaW5zZXJ0QmVmb3JlIiwiQXJyYXkiLCJpc0FycmF5IiwicmVvcmRlckFycmF5IiwidHJhbnNpdGlvbiIsInJlbW92ZSIsIml0ZW1IZWlnaHQiLCJ2YWx1ZSIsInBvc1kiLCJhbW91bnQiLCJTQ1JPTExfSlVNUCIsInNjcm9sbEJ5Iiwid2F0Y2hlcnMiLCJlbGVtZW50Iiwibm9kZSIsImNvbnRhaW5lciIsInBhcmVudCIsInBhcmVudEVsZW1lbnQiLCJhcnJheSIsInNwbGljZSIsInNsaWNlIiwiaW9uX3Jlb3JkZXIiLCJpb25fcmVvcmRlcl9ncm91cCJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8ifQ==