"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-8459e7d9_js"],{

/***/ 49691:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-8459e7d9.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startInputShims": () => (/* binding */ startInputShims)
/* harmony export */ });
/* harmony import */ var F_GIT_hypertask_ionic2_hypertask_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ 62783);
/* harmony import */ var _index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-e6d1a8be.js */ 70139);
/* harmony import */ var _helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-3b390e48.js */ 97140);
/* harmony import */ var _index_c4b11676_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-c4b11676.js */ 75057);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */



const cloneMap = new WeakMap();

const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0, disabledClonedInput = false) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }

  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY, disabledClonedInput);
  } else {
    removeClone(componentEl, inputEl);
  }
}; // TODO(FW-2832): type


const isFocused = input => {
  return input === input.getRootNode().activeElement;
};

const addClone = (componentEl, inputEl, inputRelativeY, disabledClonedInput = false) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode; // DOM WRITES

  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  /**
   * Making the cloned input disabled prevents
   * Chrome for Android from still scrolling
   * the entire page since this cloned input
   * will briefly be hidden by the keyboard
   * even though it is not focused.
   *
   * This is not needed on iOS. While this
   * does not cause functional issues on iOS,
   * the input still appears slightly dimmed even
   * if we set opacity: 1.
   */

  if (disabledClonedInput) {
    clonedEl.disabled = true;
  }

  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};

const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);

  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }

  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};

const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }

  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };

  const onBlur = () => relocateInput(componentEl, inputEl, false);

  const hideCaret = () => scrollHideCaret(true);

  const showCaret = () => scrollHideCaret(false);

  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.removeEventListener('blur', onBlur);
  };
};

const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';

const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;

  const onScroll = () => {
    didScroll = true;
  };

  const onFocusin = () => {
    focused = true;
  };

  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }

    const active = doc.activeElement;

    if (!active) {
      return;
    } // only blur if the active element is a text-input or a textarea


    if (active.matches(SKIP_SELECTOR)) {
      return;
    } // if the selected target is the active element, do not blur


    const tapped = ev.target;

    if (tapped === active) {
      return;
    }

    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }

    focused = false; // TODO FW-2796: find a better way, why 50ms?

    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };

  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};

const SCROLL_ASSIST_SPEED = 0.3;

const getScrollData = (componentEl, contentEl, keyboardHeight) => {
  var _a;

  const itemEl = (_a = componentEl.closest('ion-item,[ion-item]')) !== null && _a !== void 0 ? _a : componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight // TODO(FW-2832): type
  );
};

const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom; // compute visible area

  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area

  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area

  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.

  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area

  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};

const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight, disableClonedInput = false) => {
  let coord;

  const touchStart = ev => {
    coord = (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev);
  };

  const touchEnd = ev => {
    // input cover touchend/mouseup
    if (!coord) {
      return;
    } // get where the touchend/mouseup ended


    const endCoord = (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev); // focus this input if the pointer hasn't moved XX pixels
    // and the input doesn't already have focus

    if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {
      // begin the input focus process
      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight, disableClonedInput);
    }
  };

  componentEl.addEventListener('touchstart', touchStart, {
    capture: true,
    passive: true
  });
  componentEl.addEventListener('touchend', touchEnd, true);
  return () => {
    componentEl.removeEventListener('touchstart', touchStart, true);
    componentEl.removeEventListener('touchend', touchEnd, true);
  };
};

const jsSetFocus = /*#__PURE__*/function () {
  var _ref = (0,F_GIT_hypertask_ionic2_hypertask_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight, disableClonedInput = false) {
    if (!contentEl && !footerEl) {
      return;
    }

    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);

    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      inputEl.focus();
      return;
    } // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus


    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY, disableClonedInput);
    inputEl.focus();
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */

    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => componentEl.click());

    if (typeof window !== 'undefined') {
      let scrollContentTimeout;

      const scrollContent = /*#__PURE__*/function () {
        var _ref2 = (0,F_GIT_hypertask_ionic2_hypertask_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }

          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', scrollContent); // scroll the input into place

          if (contentEl) {
            yield (0,_index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_1__.c)(contentEl, 0, scrollData.scrollAmount, scrollData.scrollDuration);
          } // the scroll view is in the correct position now
          // give the native text input focus


          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input

          inputEl.focus();
        });

        return function scrollContent() {
          return _ref2.apply(this, arguments);
        };
      }();

      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', scrollContent);
      };

      if (contentEl) {
        const scrollEl = yield (0,_index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_1__.g)(contentEl);
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */

        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;

        if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += 50;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */


          scrollContentTimeout = setTimeout(scrollContent, 1000);
          return;
        }
      }

      scrollContent();
    }
  });

  return function jsSetFocus(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

const hasPointerMoved = (threshold, startCoord, endCoord) => {
  if (startCoord && endCoord) {
    const deltaX = startCoord.x - endCoord.x;
    const deltaY = startCoord.y - endCoord.y;
    const distance = deltaX * deltaX + deltaY * deltaY;
    return distance > threshold * threshold;
  }

  return false;
};

const PADDING_TIMER_KEY = '$ionPaddingTimer';

const enableScrollPadding = keyboardHeight => {
  const doc = document; // TODO(FW-2832): types

  const onFocusin = ev => {
    setScrollPadding(ev.target, keyboardHeight);
  };

  const onFocusout = ev => {
    setScrollPadding(ev.target, 0);
  };

  doc.addEventListener('focusin', onFocusin);
  doc.addEventListener('focusout', onFocusout);
  return () => {
    doc.removeEventListener('focusin', onFocusin);
    doc.removeEventListener('focusout', onFocusout);
  };
};

const setScrollPadding = (input, keyboardHeight) => {
  var _a, _b;

  if (input.tagName !== 'INPUT') {
    return;
  }

  if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {
    return;
  }

  if (((_b = (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.tagName) === 'ION-SEARCHBAR') {
    return;
  }

  const el = (0,_index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_1__.f)(input);

  if (el === null) {
    return;
  }

  const timer = el[PADDING_TIMER_KEY];

  if (timer) {
    clearTimeout(timer);
  }

  if (keyboardHeight > 0) {
    el.style.setProperty('--keyboard-offset', `${keyboardHeight}px`);
  } else {
    el[PADDING_TIMER_KEY] = setTimeout(() => {
      el.style.setProperty('--keyboard-offset', '0px');
    }, 120);
  }
};

const INPUT_BLURRING = true;
const SCROLL_PADDING = true;

const startInputShims = (config, platform) => {
  const doc = document;
  const isIOS = platform === 'ios';
  const isAndroid = platform === 'android';
  /**
   * Hide Caret and Input Blurring are needed on iOS.
   * Scroll Assist and Scroll Padding are needed on iOS and Android
   * with Chrome web browser (not Chrome webview).
   */

  const keyboardHeight = config.getNumber('keyboardHeight', 290);
  const scrollAssist = config.getBoolean('scrollAssist', true);
  const hideCaret = config.getBoolean('hideCaretOnScroll', isIOS);
  const inputBlurring = config.getBoolean('inputBlurring', isIOS);
  const scrollPadding = config.getBoolean('scrollPadding', true);
  const inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
  const hideCaretMap = new WeakMap();
  const scrollAssistMap = new WeakMap();

  const registerInput = /*#__PURE__*/function () {
    var _ref3 = (0,F_GIT_hypertask_ionic2_hypertask_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl) {
      yield new Promise(resolve => (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.c)(componentEl, resolve));
      const inputRoot = componentEl.shadowRoot || componentEl;
      const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
      const scrollEl = (0,_index_e6d1a8be_js__WEBPACK_IMPORTED_MODULE_1__.f)(componentEl);
      const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;

      if (!inputEl) {
        return;
      }

      if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
        const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
        hideCaretMap.set(componentEl, rmFn);
      }
      /**
       * date/datetime-locale inputs on mobile devices show date picker
       * overlays instead of keyboards. As a result, scroll assist is
       * not needed. This also works around a bug in iOS <16 where
       * scroll assist causes the browser to lock up. See FW-1997.
       */


      const isDateInput = inputEl.type === 'date' || inputEl.type === 'datetime-local';

      if (!isDateInput && (!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
        const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight, isAndroid);
        scrollAssistMap.set(componentEl, rmFn);
      }
    });

    return function registerInput(_x6) {
      return _ref3.apply(this, arguments);
    };
  }();

  const unregisterInput = componentEl => {
    if (hideCaret) {
      const fn = hideCaretMap.get(componentEl);

      if (fn) {
        fn();
      }

      hideCaretMap.delete(componentEl);
    }

    if (scrollAssist) {
      const fn = scrollAssistMap.get(componentEl);

      if (fn) {
        fn();
      }

      scrollAssistMap.delete(componentEl);
    }
  };

  if (inputBlurring && INPUT_BLURRING) {
    enableInputBlurring();
  }

  if (scrollPadding && SCROLL_PADDING) {
    enableScrollPadding(keyboardHeight);
  } // Input might be already loaded in the DOM before ion-device-hacks did.
  // At this point we need to look for all of the inputs not registered yet
  // and register them.


  for (const input of inputs) {
    registerInput(input);
  } // TODO(FW-2832): types


  doc.addEventListener('ionInputDidLoad', ev => {
    registerInput(ev.detail);
  });
  doc.addEventListener('ionInputDidUnload', ev => {
    unregisterInput(ev.detail);
  });
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtODQ1OWU3ZDlfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1lLFFBQVEsR0FBRyxJQUFJQyxPQUFKLEVBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBRyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUJDLGNBQXZCLEVBQXVDQyxjQUFjLEdBQUcsQ0FBeEQsRUFBMkRDLG1CQUFtQixHQUFHLEtBQWpGLEtBQTJGO0FBQy9HLE1BQUlQLFFBQVEsQ0FBQ1EsR0FBVCxDQUFhTCxXQUFiLE1BQThCRSxjQUFsQyxFQUFrRDtBQUNoRDtBQUNEOztBQUNELE1BQUlBLGNBQUosRUFBb0I7QUFDbEJJLElBQUFBLFFBQVEsQ0FBQ04sV0FBRCxFQUFjQyxPQUFkLEVBQXVCRSxjQUF2QixFQUF1Q0MsbUJBQXZDLENBQVI7QUFDRCxHQUZELE1BR0s7QUFDSEcsSUFBQUEsV0FBVyxDQUFDUCxXQUFELEVBQWNDLE9BQWQsQ0FBWDtBQUNEO0FBQ0YsQ0FWRCxFQVdBOzs7QUFDQSxNQUFNTyxTQUFTLEdBQUlDLEtBQUQsSUFBVztBQUMzQixTQUFPQSxLQUFLLEtBQUtBLEtBQUssQ0FBQ0MsV0FBTixHQUFvQkMsYUFBckM7QUFDRCxDQUZEOztBQUdBLE1BQU1MLFFBQVEsR0FBRyxDQUFDTixXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLEVBQXVDQyxtQkFBbUIsR0FBRyxLQUE3RCxLQUF1RTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFNUSxRQUFRLEdBQUdYLE9BQU8sQ0FBQ1ksVUFBekIsQ0FWc0YsQ0FXdEY7O0FBQ0EsUUFBTUMsUUFBUSxHQUFHYixPQUFPLENBQUNjLFNBQVIsQ0FBa0IsS0FBbEIsQ0FBakI7QUFDQUQsRUFBQUEsUUFBUSxDQUFDRSxTQUFU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O0FBQ0EsVUFBSThKLEVBQUosRUFBUTtBQUNOQSxRQUFBQSxFQUFFO0FBQ0g7O0FBQ0RYLE1BQUFBLFlBQVksQ0FBQ3BILE1BQWIsQ0FBb0IvQixXQUFwQjtBQUNEOztBQUNELFFBQUk0SSxZQUFKLEVBQWtCO0FBQ2hCLFlBQU1rQixFQUFFLEdBQUdWLGVBQWUsQ0FBQ3RILEdBQWhCLENBQW9COUIsV0FBcEIsQ0FBWDs7QUFDQSxVQUFJOEosRUFBSixFQUFRO0FBQ05BLFFBQUFBLEVBQUU7QUFDSDs7QUFDRFYsTUFBQUEsZUFBZSxDQUFDckgsTUFBaEIsQ0FBdUIvQixXQUF2QjtBQUNEO0FBQ0YsR0FmRDs7QUFnQkEsTUFBSThJLGFBQWEsSUFBSVYsY0FBckIsRUFBcUM7QUFDbkMzRixJQUFBQSxtQkFBbUI7QUFDcEI7O0FBQ0QsTUFBSWdELGFBQWEsSUFBSTRDLGNBQXJCLEVBQXFDO0FBQ25DVixJQUFBQSxtQkFBbUIsQ0FBQ2hFLGNBQUQsQ0FBbkI7QUFDRCxHQWxFMkMsQ0FtRTVDO0FBQ0E7QUFDQTs7O0FBQ0EsT0FBSyxNQUFNbEQsS0FBWCxJQUFvQnNJLE1BQXBCLEVBQTRCO0FBQzFCTSxJQUFBQSxhQUFhLENBQUM1SSxLQUFELENBQWI7QUFDRCxHQXhFMkMsQ0F5RTVDOzs7QUFDQWEsRUFBQUEsR0FBRyxDQUFDakMsZ0JBQUosQ0FBcUIsaUJBQXJCLEVBQTBDMkQsRUFBRCxJQUFRO0FBQy9DcUcsSUFBQUEsYUFBYSxDQUFDckcsRUFBRSxDQUFDK0csTUFBSixDQUFiO0FBQ0QsR0FGRDtBQUdBekksRUFBQUEsR0FBRyxDQUFDakMsZ0JBQUosQ0FBcUIsbUJBQXJCLEVBQTRDMkQsRUFBRCxJQUFRO0FBQ2pENkcsSUFBQUEsZUFBZSxDQUFDN0csRUFBRSxDQUFDK0csTUFBSixDQUFmO0FBQ0QsR0FGRDtBQUdELENBaEZEIiwic291cmNlcyI6WyIuL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbnB1dC1zaGltcy04NDU5ZTdkOS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgZyBhcyBnZXRTY3JvbGxFbGVtZW50LCBjIGFzIHNjcm9sbEJ5UG9pbnQsIGYgYXMgZmluZENsb3Nlc3RJb25Db250ZW50IH0gZnJvbSAnLi9pbmRleC1lNmQxYThiZS5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEV2ZW50TGlzdGVuZXIsIGIgYXMgcmVtb3ZlRXZlbnRMaXN0ZW5lciwgciBhcyByYWYsIHAgYXMgcG9pbnRlckNvb3JkLCBjIGFzIGNvbXBvbmVudE9uUmVhZHkgfSBmcm9tICcuL2hlbHBlcnMtM2IzOTBlNDguanMnO1xuaW1wb3J0ICcuL2luZGV4LWM0YjExNjc2LmpzJztcblxuY29uc3QgY2xvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVsb2NhdGVJbnB1dCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkUmVsb2NhdGUsIGlucHV0UmVsYXRpdmVZID0gMCwgZGlzYWJsZWRDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gIGlmIChjbG9uZU1hcC5oYXMoY29tcG9uZW50RWwpID09PSBzaG91bGRSZWxvY2F0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2hvdWxkUmVsb2NhdGUpIHtcbiAgICBhZGRDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVksIGRpc2FibGVkQ2xvbmVkSW5wdXQpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJlbW92ZUNsb25lKGNvbXBvbmVudEVsLCBpbnB1dEVsKTtcbiAgfVxufTtcbi8vIFRPRE8oRlctMjgzMik6IHR5cGVcbmNvbnN0IGlzRm9jdXNlZCA9IChpbnB1dCkgPT4ge1xuICByZXR1cm4gaW5wdXQgPT09IGlucHV0LmdldFJvb3ROb2RlKCkuYWN0aXZlRWxlbWVudDtcbn07XG5jb25zdCBhZGRDbG9uZSA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVksIGRpc2FibGVkQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICAvLyB0aGlzIGFsbG93cyBmb3IgdGhlIGFjdHVhbCBpbnB1dCB0byByZWNlaXZlIHRoZSBmb2N1cyBmcm9tXG4gIC8vIHRoZSB1c2VyJ3MgdG91Y2ggZXZlbnQsIGJ1dCBiZWZvcmUgaXQgcmVjZWl2ZXMgZm9jdXMsIGl0XG4gIC8vIG1vdmVzIHRoZSBhY3R1YWwgaW5wdXQgdG8gYSBsb2NhdGlvbiB0aGF0IHdpbGwgbm90IHNjcmV3XG4gIC8vIHVwIHRoZSBhcHAncyBsYXlvdXQsIGFuZCBkb2VzIG5vdCBhbGxvdyB0aGUgbmF0aXZlIGJyb3dzZXJcbiAgLy8gdG8gYXR0ZW1wdCB0byBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2UgKG1lc3NpbmcgdXAgaGVhZGVycy9mb290ZXJzKVxuICAvLyB0aGUgY2xvbmVkIGlucHV0IGZpbGxzIHRoZSBhcmVhIG9mIHdoZXJlIG5hdGl2ZSBpbnB1dCBzaG91bGQgYmVcbiAgLy8gd2hpbGUgdGhlIG5hdGl2ZSBpbnB1dCBmYWtlcyBvdXQgdGhlIGJyb3dzZXIgYnkgcmVsb2NhdGluZyBpdHNlbGZcbiAgLy8gYmVmb3JlIGl0IHJlY2VpdmVzIHRoZSBhY3R1YWwgZm9jdXMgZXZlbnRcbiAgLy8gV2UgaGlkZSB0aGUgZm9jdXNlZCBpbnB1dCAod2l0aCB0aGUgdmlzaWJsZSBjYXJldCkgaW52aXNpYmxlIGJ5IG1ha2luZyBpdCBzY2FsZSgwKSxcbiAgY29uc3QgcGFyZW50RWwgPSBpbnB1dEVsLnBhcmVudE5vZGU7XG4gIC8vIERPTSBXUklURVNcbiAgY29uc3QgY2xvbmVkRWwgPSBpbnB1dEVsLmNsb25lTm9kZShmYWxzZSk7XG4gIGNsb25lZEVsLmNsYXNzTGlzdC5hZGQoJ2Nsb25lZC1pbnB1dCcpO1xuICBjbG9uZWRFbC50YWJJbmRleCA9IC0xO1xuICAvKipcbiAgICogTWFraW5nIHRoZSBjbG9uZWQgaW5wdXQgZGlzYWJsZWQgcHJldmVudHNcbiAgICogQ2hyb21lIGZvciBBbmRyb2lkIGZyb20gc3RpbGwgc2Nyb2xsaW5nXG4gICAqIHRoZSBlbnRpcmUgcGFnZSBzaW5jZSB0aGlzIGNsb25lZCBpbnB1dFxuICAgKiB3aWxsIGJyaWVmbHkgYmUgaGlkZGVuIGJ5IHRoZSBrZXlib2FyZFxuICAgKiBldmVuIHRob3VnaCBpdCBpcyBub3QgZm9jdXNlZC5cbiAgICpcbiAgICogVGhpcyBpcyBub3QgbmVlZGVkIG9uIGlPUy4gV2hpbGUgdGhpc1xuICAgKiBkb2VzIG5vdCBjYXVzZSBmdW5jdGlvbmFsIGlzc3VlcyBvbiBpT1MsXG4gICAqIHRoZSBpbnB1dCBzdGlsbCBhcHBlYXJzIHNsaWdodGx5IGRpbW1lZCBldmVuXG4gICAqIGlmIHdlIHNldCBvcGFjaXR5OiAxLlxuICAgKi9cbiAgaWYgKGRpc2FibGVkQ2xvbmVkSW5wdXQpIHtcbiAgICBjbG9uZWRFbC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbiAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoY2xvbmVkRWwpO1xuICBjbG9uZU1hcC5zZXQoY29tcG9uZW50RWwsIGNsb25lZEVsKTtcbiAgY29uc3QgZG9jID0gY29tcG9uZW50RWwub3duZXJEb2N1bWVudDtcbiAgY29uc3QgdHggPSBkb2MuZGlyID09PSAncnRsJyA/IDk5OTkgOiAtOTk5OTtcbiAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0eH1weCwke2lucHV0UmVsYXRpdmVZfXB4LDApIHNjYWxlKDApYDtcbn07XG5jb25zdCByZW1vdmVDbG9uZSA9IChjb21wb25lbnRFbCwgaW5wdXRFbCkgPT4ge1xuICBjb25zdCBjbG9uZSA9IGNsb25lTWFwLmdldChjb21wb25lbnRFbCk7XG4gIGlmIChjbG9uZSkge1xuICAgIGNsb25lTWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgY2xvbmUucmVtb3ZlKCk7XG4gIH1cbiAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xuICBpbnB1dEVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xufTtcblxuY29uc3QgZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsKSA9PiB7XG4gIGlmICghc2Nyb2xsRWwgfHwgIWlucHV0RWwpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmV0dXJuO1xuICAgIH07XG4gIH1cbiAgY29uc3Qgc2Nyb2xsSGlkZUNhcmV0ID0gKHNob3VsZEhpZGVDYXJldCkgPT4ge1xuICAgIGlmIChpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZEhpZGVDYXJldCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBvbkJsdXIgPSAoKSA9PiByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSk7XG4gIGNvbnN0IGhpZGVDYXJldCA9ICgpID0+IHNjcm9sbEhpZGVDYXJldCh0cnVlKTtcbiAgY29uc3Qgc2hvd0NhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KGZhbHNlKTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1cik7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgICBpbnB1dEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkJsdXIpO1xuICB9O1xufTtcblxuY29uc3QgU0tJUF9TRUxFQ1RPUiA9ICdpbnB1dCwgdGV4dGFyZWEsIFtuby1ibHVyXSwgW2NvbnRlbnRlZGl0YWJsZV0nO1xuY29uc3QgZW5hYmxlSW5wdXRCbHVycmluZyA9ICgpID0+IHtcbiAgbGV0IGZvY3VzZWQgPSB0cnVlO1xuICBsZXQgZGlkU2Nyb2xsID0gZmFsc2U7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHtcbiAgICBkaWRTY3JvbGwgPSB0cnVlO1xuICB9O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoKSA9PiB7XG4gICAgZm9jdXNlZCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IG9uVG91Y2hlbmQgPSAoZXYpID0+IHtcbiAgICAvLyBpZiBhcHAgZGlkIHNjcm9sbCByZXR1cm4gZWFybHlcbiAgICBpZiAoZGlkU2Nyb2xsKSB7XG4gICAgICBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gb25seSBibHVyIGlmIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBhIHRleHQtaW5wdXQgb3IgYSB0ZXh0YXJlYVxuICAgIGlmIChhY3RpdmUubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgc2VsZWN0ZWQgdGFyZ2V0IGlzIHRoZSBhY3RpdmUgZWxlbWVudCwgZG8gbm90IGJsdXJcbiAgICBjb25zdCB0YXBwZWQgPSBldi50YXJnZXQ7XG4gICAgaWYgKHRhcHBlZCA9PT0gYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0YXBwZWQubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSB8fCB0YXBwZWQuY2xvc2VzdChTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb2N1c2VkID0gZmFsc2U7XG4gICAgLy8gVE9ETyBGVy0yNzk2OiBmaW5kIGEgYmV0dGVyIHdheSwgd2h5IDUwbXM/XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIWZvY3VzZWQpIHtcbiAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgIH1cbiAgICB9LCA1MCk7XG4gIH07XG4gIGFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hlbmQsIGZhbHNlKTtcbiAgfTtcbn07XG5cbmNvbnN0IFNDUk9MTF9BU1NJU1RfU1BFRUQgPSAwLjM7XG5jb25zdCBnZXRTY3JvbGxEYXRhID0gKGNvbXBvbmVudEVsLCBjb250ZW50RWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgaXRlbUVsID0gKF9hID0gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWl0ZW0sW2lvbi1pdGVtXScpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb21wb25lbnRFbDtcbiAgcmV0dXJuIGNhbGNTY3JvbGxEYXRhKGl0ZW1FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY29udGVudEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBrZXlib2FyZEhlaWdodCwgY29tcG9uZW50RWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5pbm5lckhlaWdodCAvLyBUT0RPKEZXLTI4MzIpOiB0eXBlXG4gICk7XG59O1xuY29uc3QgY2FsY1Njcm9sbERhdGEgPSAoaW5wdXRSZWN0LCBjb250ZW50UmVjdCwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KSA9PiB7XG4gIC8vIGNvbXB1dGUgaW5wdXQncyBZIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgYm9keVxuICBjb25zdCBpbnB1dFRvcCA9IGlucHV0UmVjdC50b3A7XG4gIGNvbnN0IGlucHV0Qm90dG9tID0gaW5wdXRSZWN0LmJvdHRvbTtcbiAgLy8gY29tcHV0ZSB2aXNpYmxlIGFyZWFcbiAgY29uc3QgdmlzaWJsZUFyZWFUb3AgPSBjb250ZW50UmVjdC50b3A7XG4gIGNvbnN0IHZpc2libGVBcmVhQm90dG9tID0gTWF0aC5taW4oY29udGVudFJlY3QuYm90dG9tLCBwbGF0Zm9ybUhlaWdodCAtIGtleWJvYXJkSGVpZ2h0KTtcbiAgLy8gY29tcHV0ZSBzYWZlIGFyZWFcbiAgY29uc3Qgc2FmZUFyZWFUb3AgPSB2aXNpYmxlQXJlYVRvcCArIDE1O1xuICBjb25zdCBzYWZlQXJlYUJvdHRvbSA9IHZpc2libGVBcmVhQm90dG9tICogMC43NTtcbiAgLy8gZmlndXJlIG91dCBpZiBlYWNoIGVkZ2Ugb2YgdGhlIGlucHV0IGlzIHdpdGhpbiB0aGUgc2FmZSBhcmVhXG4gIGNvbnN0IGRpc3RhbmNlVG9Cb3R0b20gPSBzYWZlQXJlYUJvdHRvbSAtIGlucHV0Qm90dG9tO1xuICBjb25zdCBkaXN0YW5jZVRvVG9wID0gc2FmZUFyZWFUb3AgLSBpbnB1dFRvcDtcbiAgLy8gZGVzaXJlZFNjcm9sbEFtb3VudCBpcyB0aGUgbmVnYXRlZCBkaXN0YW5jZSB0byB0aGUgc2FmZSBhcmVhIGFjY29yZGluZyB0byBvdXIgY2FsY3VsYXRpb25zLlxuICBjb25zdCBkZXNpcmVkU2Nyb2xsQW1vdW50ID0gTWF0aC5yb3VuZChkaXN0YW5jZVRvQm90dG9tIDwgMCA/IC1kaXN0YW5jZVRvQm90dG9tIDogZGlzdGFuY2VUb1RvcCA+IDAgPyAtZGlzdGFuY2VUb1RvcCA6IDApO1xuICAvLyBvdXIgY2FsY3VsYXRpb25zIG1ha2Ugc29tZSBhc3N1bXB0aW9ucyB0aGF0IGFyZW4ndCBhbHdheXMgdHJ1ZSwgbGlrZSB0aGUga2V5Ym9hcmQgYmVpbmcgY2xvc2VkIHdoZW4gYW4gaW5wdXRcbiAgLy8gZ2V0cyBmb2N1cywgc28gbWFrZSBzdXJlIHdlIGRvbid0IHNjcm9sbCB0aGUgaW5wdXQgYWJvdmUgdGhlIHZpc2libGUgYXJlYVxuICBjb25zdCBzY3JvbGxBbW91bnQgPSBNYXRoLm1pbihkZXNpcmVkU2Nyb2xsQW1vdW50LCBpbnB1dFRvcCAtIHZpc2libGVBcmVhVG9wKTtcbiAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLmFicyhzY3JvbGxBbW91bnQpO1xuICBjb25zdCBkdXJhdGlvbiA9IGRpc3RhbmNlIC8gU0NST0xMX0FTU0lTVF9TUEVFRDtcbiAgY29uc3Qgc2Nyb2xsRHVyYXRpb24gPSBNYXRoLm1pbig0MDAsIE1hdGgubWF4KDE1MCwgZHVyYXRpb24pKTtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxBbW91bnQsXG4gICAgc2Nyb2xsRHVyYXRpb24sXG4gICAgc2Nyb2xsUGFkZGluZzoga2V5Ym9hcmRIZWlnaHQsXG4gICAgaW5wdXRTYWZlWTogLShpbnB1dFRvcCAtIHNhZmVBcmVhVG9wKSArIDQsXG4gIH07XG59O1xuXG5jb25zdCBlbmFibGVTY3JvbGxBc3Npc3QgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0LCBkaXNhYmxlQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICBsZXQgY29vcmQ7XG4gIGNvbnN0IHRvdWNoU3RhcnQgPSAoZXYpID0+IHtcbiAgICBjb29yZCA9IHBvaW50ZXJDb29yZChldik7XG4gIH07XG4gIGNvbnN0IHRvdWNoRW5kID0gKGV2KSA9PiB7XG4gICAgLy8gaW5wdXQgY292ZXIgdG91Y2hlbmQvbW91c2V1cFxuICAgIGlmICghY29vcmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZ2V0IHdoZXJlIHRoZSB0b3VjaGVuZC9tb3VzZXVwIGVuZGVkXG4gICAgY29uc3QgZW5kQ29vcmQgPSBwb2ludGVyQ29vcmQoZXYpO1xuICAgIC8vIGZvY3VzIHRoaXMgaW5wdXQgaWYgdGhlIHBvaW50ZXIgaGFzbid0IG1vdmVkIFhYIHBpeGVsc1xuICAgIC8vIGFuZCB0aGUgaW5wdXQgZG9lc24ndCBhbHJlYWR5IGhhdmUgZm9jdXNcbiAgICBpZiAoIWhhc1BvaW50ZXJNb3ZlZCg2LCBjb29yZCwgZW5kQ29vcmQpICYmICFpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgIC8vIGJlZ2luIHRoZSBpbnB1dCBmb2N1cyBwcm9jZXNzXG4gICAgICBqc1NldEZvY3VzKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZGlzYWJsZUNsb25lZElucHV0KTtcbiAgICB9XG4gIH07XG4gIGNvbXBvbmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0LCB7IGNhcHR1cmU6IHRydWUsIHBhc3NpdmU6IHRydWUgfSk7XG4gIGNvbXBvbmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdG91Y2hFbmQsIHRydWUpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbXBvbmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0LCB0cnVlKTtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoRW5kLCB0cnVlKTtcbiAgfTtcbn07XG5jb25zdCBqc1NldEZvY3VzID0gYXN5bmMgKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZGlzYWJsZUNsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgaWYgKCFjb250ZW50RWwgJiYgIWZvb3RlckVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjcm9sbERhdGEgPSBnZXRTY3JvbGxEYXRhKGNvbXBvbmVudEVsLCAoY29udGVudEVsIHx8IGZvb3RlckVsKSwga2V5Ym9hcmRIZWlnaHQpO1xuICBpZiAoY29udGVudEVsICYmIE1hdGguYWJzKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50KSA8IDQpIHtcbiAgICAvLyB0aGUgdGV4dCBpbnB1dCBpcyBpbiBhIHNhZmUgcG9zaXRpb24gdGhhdCBkb2Vzbid0XG4gICAgLy8gcmVxdWlyZSBpdCB0byBiZSBzY3JvbGxlZCBpbnRvIHZpZXcsIGp1c3Qgc2V0IGZvY3VzIG5vd1xuICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IGZyZWFrIG91dCB3aGlsZSBpdCdzIHRyeWluZyB0byBnZXQgdGhlIGlucHV0IGluIHBsYWNlXG4gIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZLCBkaXNhYmxlQ2xvbmVkSW5wdXQpO1xuICBpbnB1dEVsLmZvY3VzKCk7XG4gIC8qKlxuICAgKiBSZWxvY2F0aW5nL0ZvY3VzaW5nIGlucHV0IGNhdXNlcyB0aGVcbiAgICogY2xpY2sgZXZlbnQgdG8gYmUgY2FuY2VsbGVkLCBzb1xuICAgKiBtYW51YWxseSBmaXJlIG9uZSBoZXJlLlxuICAgKi9cbiAgcmFmKCgpID0+IGNvbXBvbmVudEVsLmNsaWNrKCkpO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZXQgc2Nyb2xsQ29udGVudFRpbWVvdXQ7XG4gICAgY29uc3Qgc2Nyb2xsQ29udGVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8vIGNsZWFuIHVwIGxpc3RlbmVycyBhbmQgdGltZW91dHNcbiAgICAgIGlmIChzY3JvbGxDb250ZW50VGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxDb250ZW50VGltZW91dCk7XG4gICAgICB9XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgIC8vIHNjcm9sbCB0aGUgaW5wdXQgaW50byBwbGFjZVxuICAgICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgICBhd2FpdCBzY3JvbGxCeVBvaW50KGNvbnRlbnRFbCwgMCwgc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQsIHNjcm9sbERhdGEuc2Nyb2xsRHVyYXRpb24pO1xuICAgICAgfVxuICAgICAgLy8gdGhlIHNjcm9sbCB2aWV3IGlzIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uIG5vd1xuICAgICAgLy8gZ2l2ZSB0aGUgbmF0aXZlIHRleHQgaW5wdXQgZm9jdXNcbiAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlLCBzY3JvbGxEYXRhLmlucHV0U2FmZVkpO1xuICAgICAgLy8gZW5zdXJlIHRoaXMgaXMgdGhlIGZvY3VzZWQgaW5wdXRcbiAgICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgIH07XG4gICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgY29uc3Qgc2Nyb2xsRWwgPSBhd2FpdCBnZXRTY3JvbGxFbGVtZW50KGNvbnRlbnRFbCk7XG4gICAgICAvKipcbiAgICAgICAqIHNjcm9sbERhdGEgd2lsbCBvbmx5IGNvbnNpZGVyIHRoZSBhbW91bnQgd2UgbmVlZFxuICAgICAgICogdG8gc2Nyb2xsIGluIG9yZGVyIHRvIHByb3Blcmx5IGJyaW5nIHRoZSBpbnB1dFxuICAgICAgICogaW50byB2aWV3LiBJdCB3aWxsIG5vdCBjb25zaWRlciB0aGUgYW1vdW50XG4gICAgICAgKiB3ZSBjYW4gc2Nyb2xsIGluIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAgICAgKiBBcyBhIHJlc3VsdCwgc2Nyb2xsRGF0YSBtYXkgcmVxdWVzdCBhIGdyZWF0ZXJcbiAgICAgICAqIHNjcm9sbCBwb3NpdGlvbiB0aGFuIGlzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAqIGluIHRoZSBET00uIElmIHRoaXMgaXMgdGhlIGNhc2UsIHdlIG5lZWQgdG9cbiAgICAgICAqIHdhaXQgZm9yIHRoZSB3ZWJ2aWV3IHRvIHJlc2l6ZS90aGUga2V5Ym9hcmRcbiAgICAgICAqIHRvIHNob3cgaW4gb3JkZXIgZm9yIGFkZGl0aW9uYWwgc2Nyb2xsXG4gICAgICAgKiBiYW5kd2lkdGggdG8gYmVjb21lIGF2YWlsYWJsZS5cbiAgICAgICAqL1xuICAgICAgY29uc3QgdG90YWxTY3JvbGxBbW91bnQgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQgLSBzY3JvbGxFbC5jbGllbnRIZWlnaHQ7XG4gICAgICBpZiAoc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQgPiB0b3RhbFNjcm9sbEFtb3VudCAtIHNjcm9sbEVsLnNjcm9sbFRvcCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogT24gaU9TIGRldmljZXMsIHRoZSBzeXN0ZW0gd2lsbCBzaG93IGEgXCJQYXNzd29yZHNcIiBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgICAgICAqIGFmdGVyIHRoZSBpbml0aWFsIGtleWJvYXJkIGlzIHNob3duLiBUaGlzIHByZXZlbnRzIHRoZSB3ZWJ2aWV3IGZyb20gcmVzaXppbmdcbiAgICAgICAgICogdW50aWwgdGhlIFwiUGFzc3dvcmRzXCIgYmFyIGlzIHNob3duLCBzbyB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoYXQgdG8gaGFwcGVuIGZpcnN0LlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGlucHV0RWwudHlwZSA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICAgIC8vIEFkZCA1MHB4IHRvIGFjY291bnQgZm9yIHRoZSBcIlBhc3N3b3Jkc1wiIGJhclxuICAgICAgICAgIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50ICs9IDUwO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBzaG91bGQgb25seSBmaXJlIGluIDIgaW5zdGFuY2VzOlxuICAgICAgICAgKiAxLiBUaGUgYXBwIGlzIHZlcnkgc2xvdy5cbiAgICAgICAgICogMi4gVGhlIGFwcCBpcyBydW5uaW5nIGluIGEgYnJvd3NlciBvbiBhbiBvbGQgT1NcbiAgICAgICAgICogdGhhdCBkb2VzIG5vdCBzdXBwb3J0IElvbmljIEtleWJvYXJkIEV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgc2Nyb2xsQ29udGVudFRpbWVvdXQgPSBzZXRUaW1lb3V0KHNjcm9sbENvbnRlbnQsIDEwMDApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHNjcm9sbENvbnRlbnQoKTtcbiAgfVxufTtcbmNvbnN0IGhhc1BvaW50ZXJNb3ZlZCA9ICh0aHJlc2hvbGQsIHN0YXJ0Q29vcmQsIGVuZENvb3JkKSA9PiB7XG4gIGlmIChzdGFydENvb3JkICYmIGVuZENvb3JkKSB7XG4gICAgY29uc3QgZGVsdGFYID0gc3RhcnRDb29yZC54IC0gZW5kQ29vcmQueDtcbiAgICBjb25zdCBkZWx0YVkgPSBzdGFydENvb3JkLnkgLSBlbmRDb29yZC55O1xuICAgIGNvbnN0IGRpc3RhbmNlID0gZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZO1xuICAgIHJldHVybiBkaXN0YW5jZSA+IHRocmVzaG9sZCAqIHRocmVzaG9sZDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBQQURESU5HX1RJTUVSX0tFWSA9ICckaW9uUGFkZGluZ1RpbWVyJztcbmNvbnN0IGVuYWJsZVNjcm9sbFBhZGRpbmcgPSAoa2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIC8vIFRPRE8oRlctMjgzMik6IHR5cGVzXG4gIGNvbnN0IG9uRm9jdXNpbiA9IChldikgPT4ge1xuICAgIHNldFNjcm9sbFBhZGRpbmcoZXYudGFyZ2V0LCBrZXlib2FyZEhlaWdodCk7XG4gIH07XG4gIGNvbnN0IG9uRm9jdXNvdXQgPSAoZXYpID0+IHtcbiAgICBzZXRTY3JvbGxQYWRkaW5nKGV2LnRhcmdldCwgMCk7XG4gIH07XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0Jywgb25Gb2N1c291dCk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4pO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uRm9jdXNvdXQpO1xuICB9O1xufTtcbmNvbnN0IHNldFNjcm9sbFBhZGRpbmcgPSAoaW5wdXQsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGlmIChpbnB1dC50YWdOYW1lICE9PSAnSU5QVVQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50ICYmIGlucHV0LnBhcmVudEVsZW1lbnQudGFnTmFtZSA9PT0gJ0lPTi1JTlBVVCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCgoX2IgPSAoX2EgPSBpbnB1dC5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRhZ05hbWUpID09PSAnSU9OLVNFQVJDSEJBUicpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoaW5wdXQpO1xuICBpZiAoZWwgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdGltZXIgPSBlbFtQQURESU5HX1RJTUVSX0tFWV07XG4gIGlmICh0aW1lcikge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gIH1cbiAgaWYgKGtleWJvYXJkSGVpZ2h0ID4gMCkge1xuICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsIGAke2tleWJvYXJkSGVpZ2h0fXB4YCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgZWxbUEFERElOR19USU1FUl9LRVldID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1rZXlib2FyZC1vZmZzZXQnLCAnMHB4Jyk7XG4gICAgfSwgMTIwKTtcbiAgfVxufTtcblxuY29uc3QgSU5QVVRfQkxVUlJJTkcgPSB0cnVlO1xuY29uc3QgU0NST0xMX1BBRERJTkcgPSB0cnVlO1xuY29uc3Qgc3RhcnRJbnB1dFNoaW1zID0gKGNvbmZpZywgcGxhdGZvcm0pID0+IHtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IGlzSU9TID0gcGxhdGZvcm0gPT09ICdpb3MnO1xuICBjb25zdCBpc0FuZHJvaWQgPSBwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnO1xuICAvKipcbiAgICogSGlkZSBDYXJldCBhbmQgSW5wdXQgQmx1cnJpbmcgYXJlIG5lZWRlZCBvbiBpT1MuXG4gICAqIFNjcm9sbCBBc3Npc3QgYW5kIFNjcm9sbCBQYWRkaW5nIGFyZSBuZWVkZWQgb24gaU9TIGFuZCBBbmRyb2lkXG4gICAqIHdpdGggQ2hyb21lIHdlYiBicm93c2VyIChub3QgQ2hyb21lIHdlYnZpZXcpLlxuICAgKi9cbiAgY29uc3Qga2V5Ym9hcmRIZWlnaHQgPSBjb25maWcuZ2V0TnVtYmVyKCdrZXlib2FyZEhlaWdodCcsIDI5MCk7XG4gIGNvbnN0IHNjcm9sbEFzc2lzdCA9IGNvbmZpZy5nZXRCb29sZWFuKCdzY3JvbGxBc3Npc3QnLCB0cnVlKTtcbiAgY29uc3QgaGlkZUNhcmV0ID0gY29uZmlnLmdldEJvb2xlYW4oJ2hpZGVDYXJldE9uU2Nyb2xsJywgaXNJT1MpO1xuICBjb25zdCBpbnB1dEJsdXJyaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ2lucHV0Qmx1cnJpbmcnLCBpc0lPUyk7XG4gIGNvbnN0IHNjcm9sbFBhZGRpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsUGFkZGluZycsIHRydWUpO1xuICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KGNvbXBvbmVudEVsLCByZXNvbHZlKSk7XG4gICAgY29uc3QgaW5wdXRSb290ID0gY29tcG9uZW50RWwuc2hhZG93Um9vdCB8fCBjb21wb25lbnRFbDtcbiAgICBjb25zdCBpbnB1dEVsID0gaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgfHwgaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgY29uc3Qgc2Nyb2xsRWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoY29tcG9uZW50RWwpO1xuICAgIGNvbnN0IGZvb3RlckVsID0gIXNjcm9sbEVsID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZGF0ZS9kYXRldGltZS1sb2NhbGUgaW5wdXRzIG9uIG1vYmlsZSBkZXZpY2VzIHNob3cgZGF0ZSBwaWNrZXJcbiAgICAgKiBvdmVybGF5cyBpbnN0ZWFkIG9mIGtleWJvYXJkcy4gQXMgYSByZXN1bHQsIHNjcm9sbCBhc3Npc3QgaXNcbiAgICAgKiBub3QgbmVlZGVkLiBUaGlzIGFsc28gd29ya3MgYXJvdW5kIGEgYnVnIGluIGlPUyA8MTYgd2hlcmVcbiAgICAgKiBzY3JvbGwgYXNzaXN0IGNhdXNlcyB0aGUgYnJvd3NlciB0byBsb2NrIHVwLiBTZWUgRlctMTk5Ny5cbiAgICAgKi9cbiAgICBjb25zdCBpc0RhdGVJbnB1dCA9IGlucHV0RWwudHlwZSA9PT0gJ2RhdGUnIHx8IGlucHV0RWwudHlwZSA9PT0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICBpZiAoIWlzRGF0ZUlucHV0ICYmXG4gICAgICAoISFzY3JvbGxFbCB8fCAhIWZvb3RlckVsKSAmJlxuICAgICAgc2Nyb2xsQXNzaXN0ICYmXG4gICAgICAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGlzQW5kcm9pZCk7XG4gICAgICBzY3JvbGxBc3Npc3RNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVucmVnaXN0ZXJJbnB1dCA9IChjb21wb25lbnRFbCkgPT4ge1xuICAgIGlmIChoaWRlQ2FyZXQpIHtcbiAgICAgIGNvbnN0IGZuID0gaGlkZUNhcmV0TWFwLmdldChjb21wb25lbnRFbCk7XG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICAgIGhpZGVDYXJldE1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIH1cbiAgICBpZiAoc2Nyb2xsQXNzaXN0KSB7XG4gICAgICBjb25zdCBmbiA9IHNjcm9sbEFzc2lzdE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBzY3JvbGxBc3Npc3RNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gIH07XG4gIGlmIChpbnB1dEJsdXJyaW5nICYmIElOUFVUX0JMVVJSSU5HKSB7XG4gICAgZW5hYmxlSW5wdXRCbHVycmluZygpO1xuICB9XG4gIGlmIChzY3JvbGxQYWRkaW5nICYmIFNDUk9MTF9QQURESU5HKSB7XG4gICAgZW5hYmxlU2Nyb2xsUGFkZGluZyhrZXlib2FyZEhlaWdodCk7XG4gIH1cbiAgLy8gSW5wdXQgbWlnaHQgYmUgYWxyZWFkeSBsb2FkZWQgaW4gdGhlIERPTSBiZWZvcmUgaW9uLWRldmljZS1oYWNrcyBkaWQuXG4gIC8vIEF0IHRoaXMgcG9pbnQgd2UgbmVlZCB0byBsb29rIGZvciBhbGwgb2YgdGhlIGlucHV0cyBub3QgcmVnaXN0ZXJlZCB5ZXRcbiAgLy8gYW5kIHJlZ2lzdGVyIHRoZW0uXG4gIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgcmVnaXN0ZXJJbnB1dChpbnB1dCk7XG4gIH1cbiAgLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkTG9hZCcsICgoZXYpID0+IHtcbiAgICByZWdpc3RlcklucHV0KGV2LmRldGFpbCk7XG4gIH0pKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkVW5sb2FkJywgKChldikgPT4ge1xuICAgIHVucmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG59O1xuXG5leHBvcnQgeyBzdGFydElucHV0U2hpbXMgfTtcbiJdLCJuYW1lcyI6WyJnIiwiZ2V0U2Nyb2xsRWxlbWVudCIsImMiLCJzY3JvbGxCeVBvaW50IiwiZiIsImZpbmRDbG9zZXN0SW9uQ29udGVudCIsImEiLCJhZGRFdmVudExpc3RlbmVyIiwiYiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyIiwicmFmIiwicCIsInBvaW50ZXJDb29yZCIsImNvbXBvbmVudE9uUmVhZHkiLCJjbG9uZU1hcCIsIldlYWtNYXAiLCJyZWxvY2F0ZUlucHV0IiwiY29tcG9uZW50RWwiLCJpbnB1dEVsIiwic2hvdWxkUmVsb2NhdGUiLCJpbnB1dFJlbGF0aXZlWSIsImRpc2FibGVkQ2xvbmVkSW5wdXQiLCJoYXMiLCJhZGRDbG9uZSIsInJlbW92ZUNsb25lIiwiaXNGb2N1c2VkIiwiaW5wdXQiLCJnZXRSb290Tm9kZSIsImFjdGl2ZUVsZW1lbnQiLCJwYXJlbnRFbCIsInBhcmVudE5vZGUiLCJjbG9uZWRFbCIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFkZCIsInRhYkluZGV4IiwiZGlzYWJsZWQiLCJhcHBlbmRDaGlsZCIsInNldCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJ0eCIsImRpciIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsInRyYW5zZm9ybSIsImNsb25lIiwiZ2V0IiwiZGVsZXRlIiwicmVtb3ZlIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsIlNLSVBfU0VMRUNUT1IiLCJlbmFibGVJbnB1dEJsdXJyaW5nIiwiZm9jdXNlZCIsImRpZFNjcm9sbCIsImRvY3VtZW50Iiwib25TY3JvbGwiLCJvbkZvY3VzaW4iLCJvblRvdWNoZW5kIiwiZXYiLCJhY3RpdmUiLCJtYXRjaGVzIiwidGFwcGVkIiwidGFyZ2V0IiwiY2xvc2VzdCIsInNldFRpbWVvdXQiLCJibHVyIiwiU0NST0xMX0FTU0lTVF9TUEVFRCIsImdldFNjcm9sbERhdGEiLCJjb250ZW50RWwiLCJrZXlib2FyZEhlaWdodCIsIl9hIiwiaXRlbUVsIiwiY2FsY1Njcm9sbERhdGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJkZWZhdWx0VmlldyIsImlubmVySGVpZ2h0IiwiaW5wdXRSZWN0IiwiY29udGVudFJlY3QiLCJwbGF0Zm9ybUhlaWdodCIsImlucHV0VG9wIiwidG9wIiwiaW5wdXRCb3R0b20iLCJib3R0b20iLCJ2aXNpYmxlQXJlYVRvcCIsInZpc2libGVBcmVhQm90dG9tIiwiTWF0aCIsIm1pbiIsInNhZmVBcmVhVG9wIiwic2FmZUFyZWFCb3R0b20iLCJkaXN0YW5jZVRvQm90dG9tIiwiZGlzdGFuY2VUb1RvcCIsImRlc2lyZWRTY3JvbGxBbW91bnQiLCJyb3VuZCIsInNjcm9sbEFtb3VudCIsImRpc3RhbmNlIiwiYWJzIiwiZHVyYXRpb24iLCJzY3JvbGxEdXJhdGlvbiIsIm1heCIsInNjcm9sbFBhZGRpbmciLCJpbnB1dFNhZmVZIiwiZW5hYmxlU2Nyb2xsQXNzaXN0IiwiZm9vdGVyRWwiLCJkaXNhYmxlQ2xvbmVkSW5wdXQiLCJjb29yZCIsInRvdWNoU3RhcnQiLCJ0b3VjaEVuZCIsImVuZENvb3JkIiwiaGFzUG9pbnRlck1vdmVkIiwianNTZXRGb2N1cyIsImNhcHR1cmUiLCJwYXNzaXZlIiwic2Nyb2xsRGF0YSIsImZvY3VzIiwiY2xpY2siLCJ3aW5kb3ciLCJzY3JvbGxDb250ZW50VGltZW91dCIsInNjcm9sbENvbnRlbnQiLCJ1bmRlZmluZWQiLCJjbGVhclRpbWVvdXQiLCJkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIiLCJ0b3RhbFNjcm9sbEFtb3VudCIsInNjcm9sbEhlaWdodCIsImNsaWVudEhlaWdodCIsInNjcm9sbFRvcCIsInR5cGUiLCJ0aHJlc2hvbGQiLCJzdGFydENvb3JkIiwiZGVsdGFYIiwieCIsImRlbHRhWSIsInkiLCJQQURESU5HX1RJTUVSX0tFWSIsImVuYWJsZVNjcm9sbFBhZGRpbmciLCJzZXRTY3JvbGxQYWRkaW5nIiwib25Gb2N1c291dCIsIl9iIiwidGFnTmFtZSIsInBhcmVudEVsZW1lbnQiLCJlbCIsInRpbWVyIiwic2V0UHJvcGVydHkiLCJJTlBVVF9CTFVSUklORyIsIlNDUk9MTF9QQURESU5HIiwic3RhcnRJbnB1dFNoaW1zIiwiY29uZmlnIiwicGxhdGZvcm0iLCJpc0lPUyIsImlzQW5kcm9pZCIsImdldE51bWJlciIsInNjcm9sbEFzc2lzdCIsImdldEJvb2xlYW4iLCJpbnB1dEJsdXJyaW5nIiwiaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImhpZGVDYXJldE1hcCIsInNjcm9sbEFzc2lzdE1hcCIsInJlZ2lzdGVySW5wdXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImlucHV0Um9vdCIsInNoYWRvd1Jvb3QiLCJxdWVyeVNlbGVjdG9yIiwicm1GbiIsImlzRGF0ZUlucHV0IiwidW5yZWdpc3RlcklucHV0IiwiZm4iLCJkZXRhaWwiXSwic291cmNlUm9vdCI6IndlYnBhY2s6Ly8vIn0=